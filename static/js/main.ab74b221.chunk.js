(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(68)},28:function(e,t,a){},30:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){},38:function(e,t,a){},40:function(e,t,a){},42:function(e,t,a){},55:function(e,t,a){},57:function(e,t,a){},61:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n,r,o=a(0),c=a.n(o),l=a(21),i=a.n(l),s=(a(28),a(4)),u=a(5),d=a(7),m=a(6),h=a(8),p=a(2),f=a(72),E=a(71),g=a(70),v=a(14),b=Object(v.a)(),S=(a(30),function(e){var t=window.location.hash.match(new RegExp(e+"=([^&]*)"));return t?t[1]:null}),w=(a(32),a(69)),y=(a(34),function(e){var t=Date.now(),a=Math.round((t-e)/1e3);if(a<10?a="Just now":a<60?a=Math.round(a)+" seconds ago":a<3600?a=Math.round(a/60)+" minutes ago":a<86400?a=Math.round(a/3600)+" hours ago":a<2592e3?a=Math.round(a/86400)+" days ago":a<31536e3?a=Math.round(a/2592e3)+" months ago":a>=31536e3&&(a=Math.round(a/31536e3)+" years ago"),a[0]<2){var n=a.indexOf("s");a=a.slice(0,n)+" ago"}return a}),N=function(e){var t=e.r,a=e.author,n=e.date,r=y(1e3*n);return c.a.createElement("small",{className:"AuthorHeader"},c.a.createElement("span",{className:"subreddit"},c.a.createElement(w.a,{to:"".concat("/ForRedditToGo","/").concat(t)},t)),c.a.createElement("span",{className:"author"}," \u2022 Posted by u/",a),c.a.createElement("span",{className:"time"}," \u2022 ",r))},k=function(e){var t=e.data;return c.a.createElement(w.a,{to:"".concat("/ForRedditToGo","/r/").concat(t.subreddit,"/").concat(t.id),className:"ThreadBox"},c.a.createElement("small",{className:"score"},c.a.createElement("span",null,t.score)),c.a.createElement("div",{className:"content"},c.a.createElement(N,{r:t.subreddit_name_prefixed,author:t.author,date:t.created_utc}),t&&c.a.createElement("h3",null,t.title),t.selftext?c.a.createElement("p",{className:"selftext"},t.selftext):c.a.createElement("p",null,"This post contains media only. Follow the link to find out more."),t.url&&"https://www.reddit.com/"!==t.url.slice(0,23)&&c.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer"},c.a.createElement("div",null,t.url.split("/")[2])),c.a.createElement("div",{className:"stats"},c.a.createElement("small",null,c.a.createElement("span",null,"".concat(t.num_comments," Comments"))),c.a.createElement("small",{className:"score-mobile"},c.a.createElement("span",null,c.a.createElement("i",{className:"fas fa-arrow-up"})," ".concat(t.score," Upvotes "),c.a.createElement("i",{className:"fas fa-arrow-down"}))))))},O=(a(38),function(e){var t=e.onChange,a=e.values,n=e.active;return c.a.createElement("form",{className:"SortBox",onChange:t},c.a.createElement("span",null,"Sort by"),c.a.createElement("select",{value:n.value||n},a&&a.map(function(e,t){return c.a.createElement("option",{value:e.toLowerCase(),key:t},e)})),n.top&&c.a.createElement("select",{value:n.top,className:"top"===n.value?"SortBox-top SortBox-top-active":"SortBox-top"},j.map(function(e,t){return c.a.createElement("option",{value:e.toLowerCase(),key:t},e)})))}),j=["Hour","Day","Week","Month","Year","All"],T=(a(40),function(){return c.a.createElement("div",{className:"LoadingScreen"},c.a.createElement("div",null,c.a.createElement("h1",null,"LOADING"),c.a.createElement("div",{className:"spinner"})))}),R=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={listing:null,loading:!0,sort:{value:"Hot",top:"Hour"}},a.handleSort=a.handleSort.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.mySubreddits,n=t.loggedIn;if(a&&n){var r=a.map(function(e){return e.data.display_name});fetch("https://www.reddit.com/r/".concat(r.join("+"),"/.json?limit=100")).then(function(e){return e.json()}).then(function(t){return e.setState({listing:t,loading:!1})}).catch(function(e){return console.error(e)})}else this.setState({loading:!1})}},{key:"handleSort",value:function(e){var t=this;this.setState({loading:!0,sort:{value:e.target.form[0].value,top:e.target.form[1].value}});var a=this.props,n=a.mySubreddits,r=a.loggedIn;if(n&&r){var o=n.map(function(e){return e.data.display_name}),c="top"===e.target.form[0].value?"&t=".concat(e.target.form[1].value):"";fetch("https://www.reddit.com/r/".concat(o.join("+"),"/").concat(e.target.form[0].value,".json?limit=100").concat(c)).then(function(e){return e.json()}).then(function(e){return t.setState({listing:e,loading:!1})}).catch(function(e){return console.error(e)})}else this.setState({loading:!1})}},{key:"render",value:function(){var e=this.state,t=e.listing,a=e.loading,n=e.sort;return a?c.a.createElement(T,null):c.a.createElement("div",{className:"Home"},c.a.createElement(C,null),t?c.a.createElement("div",{className:"container"},c.a.createElement(O,{onChange:this.handleSort,active:n,values:["Hot","New","Controversial","Top"]}),t.data.children.map(function(e,t){return c.a.createElement(k,Object.assign({},e,{key:t}))})):c.a.createElement(_,null))}}]),t}(o.Component),C=function(){return c.a.createElement("header",{className:"home-banner"},c.a.createElement("div",{className:"banner-text"},c.a.createElement("h1",null,"For Reddit,To Go")),c.a.createElement("img",{alt:"",src:"".concat("/ForRedditToGo","/images/walker.png")}))},_=function(){return c.a.createElement("div",{className:"container"},c.a.createElement("section",{className:"frontpage-section"},c.a.createElement("h1",null,"Listen to Reddit, while getting stuff done."),c.a.createElement("p",null,"Reddit To Go is a web application intended for portable devices that leverages the ",c.a.createElement("b",null,"Text to Speech")," features of modern browsers to read out reddit threads. For now please consider using the latest version of ",c.a.createElement("b",null,"Google Chrome")," or ",c.a.createElement("b",null,"Mozilla Firefox")," to ensure functionality and the best possible user experience."),c.a.createElement("p",null,"RedditToGo fits some subreddits more than others. Where it excels are textbased threads and comment trees. Accessing threads that share images, videos or links is possible, but for now you will have to follow the link to the original source to consume it."),c.a.createElement("p",null,"Features like messaging, mod features, etc are not included for now, because this is meant to be a complementary service one can use if needed."),c.a.createElement("p",null,"If you want to suggest or contribute a feature, feel free to contact me on my page or on github.")),c.a.createElement("section",{className:"frontpage-section"},c.a.createElement("h1",null,"How to use / main features"),c.a.createElement("p",null,"When reading a thread a user may use the synthesizer buttons to control the speech synthesis. Pressing ",c.a.createElement("b",null,"PLAY")," will read the thread from beginning to end. You may skip or relisten to individual posts by using the ",c.a.createElement("b",null,"BACK")," / ",c.a.createElement("b",null,"SKIP")," buttons respectively. ",c.a.createElement("b",null,"STOP")," will halt and cancel all queued messages."),c.a.createElement("p",null,"You may also select a ",c.a.createElement("b",null,"READMODE"),". For now there is ",c.a.createElement("b",null,"STANDARD")," and ",c.a.createElement("b",null,"TOP CMNTS"),". ",c.a.createElement("b",null,"STANDARD")," will read the thread as is with all comments including some (or all, depending on the volume) high rated replies, while ",c.a.createElement("b",null,"TOP CMNTS")," only reads out comments without reading out any replies."),c.a.createElement("p",null,"Comments get initialized with the phrase: ",c.a.createElement("i",null,"USERNAME comments...")," while replies get initialized with ",c.a.createElement("i",null,"USERNAME replies..."))),c.a.createElement("section",{className:"frontpage-section"},c.a.createElement("h1",null,"Contact"),c.a.createElement("p",null,"If you find any bugs or have suggestions please feel free to contact me on my page or on github. I built this project for myself initially, but figured some people might find it useful. I would be stoked to improve ",c.a.createElement("b",null,"For Reddit, To Go")," for others aswell."),c.a.createElement("div",{className:"socialmedia-icons"},c.a.createElement("a",{href:"https://raphaelmayer.github.io/go",target:"_blank",rel:"noopener noreferrer"},c.a.createElement("i",{className:"fas fa-envelope"})),c.a.createElement("a",{href:"https://github.com/raphaelmayer/ForRedditToGo",target:"_blank",rel:"noopener noreferrer"},c.a.createElement("i",{className:"fab fa-github"})))))},A=(a(42),function(){return c.a.createElement("div",null,"There seems to be an error. Please try again and check your URL.")}),x=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).state={listing:null,currentSub:null,loading:!0,sort:{value:"hot",top:"hour"}},e.handleSort=e.handleSort.bind(Object(p.a)(Object(p.a)(e))),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.pathname.split("/")[3];fetch("https://www.reddit.com/r/".concat(t,"/.json?limit=100")).then(function(e){return e.json()}).then(function(a){return e.setState({listing:a,currentSub:t,loading:!1})}).catch(function(a){return e.setState({listing:null,currentSub:t,loading:!1})})}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.location.pathname.split("/")[3],a=this.state,n=a.loading,r=a.currentSub,o=a.sort;if(!n&&r!==t){n||this.setState({loading:!0});var c="top"===o.value?"&t=".concat(o.top):"";fetch("https://www.reddit.com/r/".concat(t,"/").concat(o.value,"/.json?limit=100").concat(c)).then(function(e){return e.json()}).then(function(a){return e.setState({listing:a,currentSub:t,loading:!1})}).catch(function(a){return e.setState({listing:null,currentSub:t,loading:!1})})}}},{key:"handleSort",value:function(e){var t=this;this.setState({loading:!0,sort:{value:e.target.form[0].value,top:e.target.form[1].value}});var a=this.props.location.pathname.split("/")[3],n="top"===e.target.form[0].value?"&t=".concat(e.target.form[1].value):"";fetch("https://www.reddit.com/r/".concat(a,"/").concat(e.target.form[0].value,"/.json?limit=100").concat(n)).then(function(e){return e.json()}).then(function(e){return t.setState({listing:e,currentSub:a,loading:!1})}).catch(function(e){return t.setState({listing:null,currentSub:a,loading:!1})})}},{key:"render",value:function(){var e=this.state,t=e.listing,a=e.loading,n=e.sort;if(a)return c.a.createElement(T,null);if(t&&t.data){var r=t.data.children;return c.a.createElement("div",{className:"Sub"},c.a.createElement("header",{className:"SubTitle"},c.a.createElement("h2",null,"r/",r[0]&&r[0].data.subreddit)),c.a.createElement("div",{className:"container"},c.a.createElement(O,{onChange:this.handleSort,active:n,values:["Hot","New","Controversial","Top"]}),r.map(function(e,t){return c.a.createElement(k,Object.assign({},e,{key:t}))})))}return c.a.createElement(A,null)}}]),t}(o.Component),P=a(15),I=a.n(P),M=(a(55),a(57),function(e){var t=document.getElementById("log");t&&t.insertAdjacentHTML("beforeend","<small><b>".concat(e,"</b></small>"))}),D=0;function H(){D++;var e=n.getVoices();e.length&&(r=e.find(function(e){return/en[-_]US/.test(e.lang)})),r||(D<10?setTimeout(function(){H()},250):console.error("en-US voice not found."))}function G(e,t){var a=[],n=e[0].data.children[0].data.title,r=e[0].data.children[0].data.selftext,o=e[1].data.children;return n&&a.push(B(n)),r&&a.push(B(r)),o.map(function(e,n){a.push(" ".concat(e.data.author," comments: ? ")+B(e.data.body)),"STANDARD"===t&&function e(t,a){if(t&&"more"!==t.kind){var n=t.data.children;n.map(function(t,n){"more"!==t.kind&&(a.push(" ".concat(t.data.author," replies: ? ")+B(t.data.body)),e(t.data.replies,a))})}}(e.data.replies,a)}),a}function B(e){return e?e.replace(/[^\w\s.:,_$@%;-=`\xb4'\/!?]/gi,""):null}"speechSynthesis"in window&&(n=window.speechSynthesis,H());var F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={logIsOpen:!1,listing:null,readmode:"STANDARD",script:null,position:0,isOn:!1},a.handleLog=a.handleLog.bind(Object(p.a)(Object(p.a)(a))),a.handleReadMode=a.handleReadMode.bind(Object(p.a)(Object(p.a)(a))),a.play=a.play.bind(Object(p.a)(Object(p.a)(a))),a.back=a.back.bind(Object(p.a)(Object(p.a)(a))),a.skip=a.skip.bind(Object(p.a)(Object(p.a)(a))),a.stop=a.stop.bind(Object(p.a)(Object(p.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.listing;e&&this.setState({listing:e})}},{key:"play",value:function(e){var t=this,a=this.state,n=a.listing,r=a.position,o=a.readmode;if(window.speechSynthesis.speaking)M("TOGGLE PAUSE EVENT"),window.speechSynthesis.cancel(),this.setState({isOn:!1,position:r-1});else{M("START EVENT");var c=G(n,o);U(r,c,function(e,a){t.setState({position:t.state.position+1})}),this.setState({isOn:!0,script:c,position:r})}}},{key:"back",value:function(e){var t=this;M("BACK EVENT");var a=this.state,n=a.script,r=a.position,o=r<2?0:r-1;U(o,n,function(e,a){t.setState({position:t.state.position+1})}),window.speechSynthesis.speaking?this.setState({position:o-1,isOn:!0}):this.setState({position:o,isOn:!0})}},{key:"skip",value:function(e){var t=this;M("SKIP EVENT");var a=this.state,n=a.script,r=a.position+1;U(r,n,function(e,a){t.setState({position:t.state.position+1})}),window.speechSynthesis.speaking?this.setState({position:r-1,isOn:!0}):this.setState({position:r,isOn:!0})}},{key:"stop",value:function(e){M("STOP EVENT");var t=this.state.isOn;window.speechSynthesis.cancel(),t&&this.setState({isOn:!1,position:-1,script:null})}},{key:"handleLog",value:function(e){this.setState({logIsOpen:!this.state.logIsOpen})}},{key:"handleReadMode",value:function(e){this.setState({readmode:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.logIsOpen,a=e.isOn,n=e.readmode,r=e.position,o=e.script;return c.a.createElement("div",{className:"Synth"},c.a.createElement("i",{onClick:this.handleLog,className:"fas fa-bars"}),c.a.createElement("div",{id:"log",className:t?"":"hidden"},c.a.createElement("p",null,c.a.createElement("u",null,"DebugLog"))),c.a.createElement("div",{className:"synth-name"},"Synthesizer 2000"),c.a.createElement("div",{className:"readmode"},"Mode:",c.a.createElement("select",{onChange:this.handleReadMode,value:n},c.a.createElement("i",{className:"fas fa-ellipsis-h"}),c.a.createElement("option",{value:"STANDARD"},"Standard"),c.a.createElement("option",{value:"TOP_COMMENTS"},"Top cmnts")),c.a.createElement("span",{className:"position"},"".concat(r," / ").concat(o&&o.length||" - "))),c.a.createElement("div",{className:"synth-btn-container"},c.a.createElement(L,{icon:a?"fas fa-pause":"fas fa-play",onClick:this.play}),c.a.createElement(L,{icon:"fas fa-backward",onClick:this.back}),c.a.createElement(L,{icon:"fas fa-forward",onClick:this.skip}),c.a.createElement(L,{icon:"fas fa-stop",onClick:this.stop})))}}]),t}(o.Component),L=function(e){var t=e.icon,a=e.onClick;return c.a.createElement("div",{className:"synth-btn",onClick:a},c.a.createElement("i",{className:t,id:"playbtn"}))};function U(e,t,a){window.speechSynthesis.cancel(),t.slice(e,t.length).map(function(e){e&&function(e,t){console.log("readOut");var a=new SpeechSynthesisUtterance(e);n.getVoices(),H(),a.lang="en-US",a.volume=1,a.rate=1,a.pitch=1,a.voice=r,a.addEventListener("error",function(e){return console.error(e)}),a.onstart=function(t){M("array char count: ".concat(e.length," (32,767 max)")),console.log(t),console.log("SPEECH START!"),M("SPEECH started.")},a.onend=function(e){console.log("SPEECH END!"),M("SPEECH ended."),t&&t(null,e)},a.onpause=function(){console.log("SPEECH PAUSE!"),M("SPEECH paused.")},a.onresume=function(){console.log("SPEECH RESUME!"),M("SPEECH resumed.")},a.onerror=function(e){console.log("SPEECH ERROR!"),M("SPEECH ERROR!"),t&&t("ERROR reading out.",e)},n.speak(a)}(e,function(e,t){e&&console.error(e),a(null,t)})})}var V=function(e){var t=e.onClick,a=e.text,n=e.data,r=n&&n.children,o=n&&n.parent_id;return c.a.createElement("button",{onClick:function(e){return t(e,r,o)},className:"MoreButton"},"".concat(a))};function q(e,t,a){return new Promise(function(n,r){e[1].data.children.map(function(r,o){r.data.id===t&&"more"!==r.kind&&(r.data.replies.data.children.pop(),a.map(function(e){return r.data.replies.data.children.push(e)}),n(e)),r.data.replies&&function t(a,n,r){return new Promise(function(o,c){var l=a.data.children;l.map(function(a,c){a.data.id===n&&"more"!==a.kind&&(a.data.replies.data.children.pop(),r.map(function(e){return a.data.replies.data.children.push(e)}),o(e)),a.data.replies&&t(a.data.replies,n,r).then(function(e){return o(e)}).catch(function(e){return console.err(e)})})})}(r.data.replies,t,a).then(function(e){return e&&n(e)}).catch(function(e){return console.error(e)})})})}var W=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},z=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).state={listing:null,loading:!0,toRead:null,sort:"Best"},e.handleSort=e.handleSort.bind(Object(p.a)(Object(p.a)(e))),e.handleMore=e.handleMore.bind(Object(p.a)(Object(p.a)(e))),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.pathname,a=t.split("/")[3],n=t.split("/")[4];fetch("https://www.reddit.com/r/".concat(a,"/comments/").concat(n,"/.json?limit=100")).then(function(e){return e.json()}).then(function(t){return e.setState({listing:t,loading:!1})}).catch(function(t){e.setState({listing:null,loading:!1}),console.error(t)})}},{key:"handleSort",value:function(e){var t=this;this.setState({loading:!0,sort:e.target.value});var a=this.props.location.pathname,n=a.split("/")[3],r=a.split("/")[4];fetch("https://www.reddit.com/r/".concat(n,"/comments/").concat(r,"/.json?sort=").concat(e.target.value,"&limit=100")).then(function(e){return e.json()}).then(function(e){return t.setState({listing:e,loading:!1})}).catch(function(e){return t.setState({listing:e,loading:!1})})}},{key:"handleVote",value:function(e){var t=e.target.attributes.name.value,a="fas fa-arrow-up"===e.target.className?"1":"-1",n=localStorage.getItem("access_token");fetch("https://oauth.reddit.com/api/vote?id=".concat(t,"&dir=").concat(a),{method:"POST",headers:{Authorization:"bearer ".concat(n)}}).catch(function(e){return console.error(e)}).then(function(e){return e.json()}).then(function(e){return console.log(e)}),e.target.className+=" orange"}},{key:"handleMore",value:function(e,t,a){var n=this,r=this.state.listing,o=r[0].data.children[0].data.id;console.log("children:",t),console.log("parentId:",a),fetch("https://www.reddit.com/api/morechildren.json?link_id=t3_".concat(o,"&children=").concat(t.join(", "),"&api_type=json")).catch(function(e){return console.error(e)}).then(function(e){return e.json()}).then(function(e){console.log("add. replies:",e.json),q(r,a.substring(3),e.json.data.things).then(function(e){return n.setState({listing:e})})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.listing,n=t.loading,r=t.sort;if(n)return c.a.createElement(T,null);if(a){var o=a[0].data.children[0],l=a[1].data.children;return c.a.createElement("div",{className:"Thread"},c.a.createElement(F,{listing:a}),c.a.createElement("div",{className:"container"},c.a.createElement(Y,Object.assign({},o,{handleVote:this.handleVote})),c.a.createElement("div",null,c.a.createElement(O,{onChange:this.handleSort,active:r,values:["Best","Top","New","Controversial","Old"]}),l&&l.map(function(t,a){return c.a.createElement(K,Object.assign({key:a},t,{handleVote:e.handleVote,handleMore:e.handleMore}))}))))}return c.a.createElement(A,null)}}]),t}(o.Component),Y=function(e){var t=e.data,a=e.handleVote;return c.a.createElement("article",{className:"ThreadHead"},c.a.createElement(N,{r:t.subreddit_name_prefixed,author:t.author,date:t.created_utc}),c.a.createElement("header",null,c.a.createElement("h2",null,t.title)),t.selftext_html?c.a.createElement("div",null,I()(W(t.selftext_html))):c.a.createElement("p",null,"This post contains media only. Follow the link to find out more."),t.url&&"https://www.reddit.com/"!==t.url.slice(0,23)&&c.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer"},c.a.createElement("div",null,t.url.split("/")[2])),c.a.createElement("div",{className:"stats"},c.a.createElement("small",null,t.num_comments," Comments"),c.a.createElement("small",{className:"score"},c.a.createElement("span",null,c.a.createElement("i",{className:"fas fa-arrow-up",name:t.name,onClick:a})," ".concat(t.score," Upvotes "),c.a.createElement("i",{className:"fas fa-arrow-down",name:t.name,onClick:a})))))},K=function e(t){var a=t.data,n=t.handleVote,r=t.handleMore;a||console.error("");var o=a&&y(1e3*a.created_utc);return c.a.createElement("div",{className:"CommentBox"},c.a.createElement("div",{className:"content"},c.a.createElement("small",{className:"author"},a.author," \u2022 ",o," "),c.a.createElement("div",null,I()(W(a.body_html))),c.a.createElement("div",{className:"stats"},c.a.createElement("small",null,c.a.createElement("span",null,"".concat(a.replies?a.replies.data.children.length:0," Replies"))),c.a.createElement("small",{className:"score"},c.a.createElement("span",null,c.a.createElement("i",{className:"fas fa-arrow-up",name:a.name,onClick:n})," ".concat(a.score," Upvotes "),c.a.createElement("i",{className:"fas fa-arrow-down",name:a.name,onClick:n})))),c.a.createElement("br",null),a.replies&&a.replies.data.children&&a.replies.data.children.map(function(t,a){return"more"===t.kind?c.a.createElement(V,Object.assign({key:a},t,{onClick:r,text:"".concat(t.data.count," more replies")})):t.data&&c.a.createElement(e,Object.assign({},t,{key:a,handleMore:r}))})))},J=a(12),X=a.n(J),$=a(16),Q=(a(61),function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).state={loading:!0,query:null,posts:null,subreddits:null},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=Object($.a)(X.a.mark(function e(){var t,a,n;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.location.pathname.split("/")[3],console.log(t),e.next=4,fetch("https://www.reddit.com/search.json?q=".concat(t));case 4:return a=e.sent,e.next=7,fetch("https://www.reddit.com/subreddits/search.json?q=".concat(t));case 7:return n=e.sent,e.t0=this,e.next=11,a.json();case 11:return e.t1=e.sent,e.next=14,n.json();case 14:e.t2=e.sent,e.t3=t,e.t4={posts:e.t1,subreddits:e.t2,loading:!1,query:e.t3},e.t0.setState.call(e.t0,e.t4);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object($.a)(X.a.mark(function e(){var t,a,n,r,o,c;return X.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.query,n=t.loading,r=this.props.location.pathname.split("/")[3],n||a===r){e.next=20;break}return n||this.setState({loading:!0}),e.next=6,fetch("https://www.reddit.com/subreddits/search.json?q=".concat(r));case 6:return o=e.sent,e.next=9,fetch("https://www.reddit.com/search.json?q=".concat(r));case 9:return c=e.sent,e.t0=this,e.next=13,o.json();case 13:return e.t1=e.sent,e.next=16,c.json();case 16:e.t2=e.sent,e.t3=r,e.t4={subreddits:e.t1,posts:e.t2,loading:!1,query:e.t3},e.t0.setState.call(e.t0,e.t4);case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.posts,a=e.subreddits,n=e.loading,r=e.query;return n?c.a.createElement(T,null):t&&a||a||t?c.a.createElement("div",{className:"Search"},c.a.createElement("header",{className:"SearchTitle"},c.a.createElement("h2",null,"Search results for ",c.a.createElement("u",null,r),":")),c.a.createElement("div",{className:"container"},c.a.createElement("section",{className:"search-results"},c.a.createElement("h3",null,"Subreddits"),a.data.children[0]?a.data.children.slice(0,5).map(function(e,t){return c.a.createElement(Z,e)}):c.a.createElement("small",null,"Wow, much empty o.O"),c.a.createElement(V,{onClick:function(){return""},text:"Show more results"})),c.a.createElement("div",{style:{width:"100%",margin:"20px auto",borderTop:"1px solid silver"}}),c.a.createElement("section",{className:"search-results"},c.a.createElement("h3",null,"Posts"),t.data.children[0]?t.data.children.map(function(e,t){return c.a.createElement(k,Object.assign({},e,{key:t}))}):c.a.createElement("small",null,"Wow, much empty o.O")))):c.a.createElement(A,null)}}]),t}(o.Component)),Z=function(e){var t=e.data;return c.a.createElement(w.a,{to:"".concat("/ForRedditToGo","/r/").concat(t.display_name)},c.a.createElement("div",{className:"SubRedditBoxAlt"},c.a.createElement("div",{className:"head"},c.a.createElement("div",{className:"subreddit-box-img",style:{backgroundImage:"url(".concat(t.header_img,")")}}),c.a.createElement("div",{className:"title"},c.a.createElement("p",null,c.a.createElement("b",null,t.display_name_prefixed)),c.a.createElement("small",null,t.subscribers," Subscribers"))),c.a.createElement("small",{className:"description"},t.public_description||t.title)))},ee=(a(63),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).state={isHidden:!1},a.onScroll=function(){window.scrollY>a.prev?a.setState({isHidden:!0}):a.setState({isHidden:!1}),a.prev=window.scrollY},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onScroll)}},{key:"render",value:function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"/ForRedditToGo",REACT_APP_CLIENT_ID:"HqHWkhFuYhH3Rg",REACT_APP_CLIENT_ID_DEV:"XDIYywntEX-Vsg",REACT_APP_DURATION:"temporary",REACT_APP_SCOPE:"identity mysubreddits read vote",REACT_APP_SECRET_STRING:"RANDOM_STRING",REACT_APP_URI:"https://raphaelmayer.github.io/ForRedditToGo",REACT_APP_URI_DEV:"http://localhost:3000"}),t=e.REACT_APP_DURATION,a=e.REACT_APP_SCOPE,n=e.REACT_APP_SECRET_STRING,r=this.props,o=r.loggedIn,l=r.user,i=r.handleSideBar,s=r.onSubmit,u=this.state.isHidden;return c.a.createElement("nav",{className:u?"navbar hide":"navbar"},c.a.createElement("i",{onClick:i,className:"fas fa-bars"}),c.a.createElement(w.a,{to:"".concat("/ForRedditToGo","/"),className:"link"},c.a.createElement("div",{className:"logo"},"For Reddit To Go")),c.a.createElement("form",{onSubmit:s},c.a.createElement("input",{type:"text",placeholder:"search reddit"}),c.a.createElement("button",{type:"submit"},c.a.createElement("i",{className:"fas fa-search"}))),c.a.createElement("div",{className:"login-user-field"},o&&l?c.a.createElement(te,{user:l}):c.a.createElement("a",{className:"login-btn",href:"https://www.reddit.com/api/v1/authorize\n\t\t\t\t\t\t?client_id=".concat("HqHWkhFuYhH3Rg","\n\t\t\t\t\t\t&response_type=token\n\t\t\t\t\t\t&state=").concat(n,"\n\t\t\t\t\t\t&redirect_uri=").concat("https://raphaelmayer.github.io/ForRedditToGo","\n\t\t\t\t\t\t&duration=").concat(t,"\n\t\t\t\t\t\t&scope=").concat(a)},c.a.createElement("i",{className:"fas fa-user"}))))}}]),t}(o.Component)),te=function(e){var t=e.user;return c.a.createElement("div",{className:"UserBox"},c.a.createElement("div",{className:"name-karma-container"},c.a.createElement("div",{className:"name"},t.name),c.a.createElement("div",{className:"karma"},t.karma," Karma")),c.a.createElement("img",{src:t.img,alt:"user_image"}),c.a.createElement("button",{onClick:function(){localStorage.removeItem("access_token"),b.push("/ForRedditToGo")},className:"logout-btn"},"Logout"))},ae=(a(65),function(e){var t=e.subreddits,a=e.isOpen,n=e.handleSideBar;e.loggedIn;return c.a.createElement("div",{className:a?"SubRedditTab SubRedditTab-active":"SubRedditTab"},c.a.createElement("div",{className:"sub-reddit-tab-top"},c.a.createElement(w.a,{className:"logo",to:"".concat("/ForRedditToGo","/"),onClick:n},"For Reddit To Go"),c.a.createElement("i",{className:"fas fa-times",onClick:n})),t&&t.map(function(e,t){return c.a.createElement(ne,Object.assign({handleSideBar:n,key:t},e))}),!t&&c.a.createElement("div",{className:"not-logged-in"},"Log in to see a list of your subscribed subreddits."))}),ne=function(e){var t=e.data,a=e.handleSideBar;return c.a.createElement(w.a,{to:"".concat("/ForRedditToGo","/r/").concat(t.display_name),onClick:a,className:"subreddit-box"},c.a.createElement("div",{className:"subreddit-box-img",style:{backgroundImage:"url(".concat(t.header_img,")")}}),c.a.createElement("h3",null,t.display_name_prefixed))},re="/ForRedditToGo",oe=function(e){function t(){var e;return Object(s.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).state={user:null,mySubreddits:null,loggedIn:!1,sidebarIsOpen:!1},e.handleSideBar=e.handleSideBar.bind(Object(p.a)(Object(p.a)(e))),e.handleSearch=e.handleSearch.bind(Object(p.a)(Object(p.a)(e))),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("access_token"),a=S("access_token"),n=S("state");a&&"RANDOM_STRING"===n&&(console.log("successfully logged in"),localStorage.setItem("access_token",a),ce(a).then(function(e){return e.json()}).then(function(t){return e.setState({user:t})}).catch(function(e){return console.error(e)}),le(a).then(function(e){return e.json()}).then(function(t){return e.setState({mySubreddits:t.data.children,loggedIn:!0})}).catch(function(e){return console.error(e)})),t&&(ce(t).then(function(e){return e.json()}).then(function(t){return e.setState({user:t})}).catch(function(e){return console.error(e)}),le(t).then(function(e){return e.json()}).then(function(t){return e.setState({mySubreddits:t.data.children,loggedIn:!0})}).catch(function(e){return console.error(e)}))}},{key:"handleSideBar",value:function(e){this.state.sidebarIsOpen?this.setState({sidebarIsOpen:!1}):this.setState({sidebarIsOpen:!0})}},{key:"handleSearch",value:function(e){e.preventDefault();var t=e.target[0].value;b.push("".concat(re,"/search/").concat(t))}},{key:"render",value:function(){var e=this.state,t=e.mySubreddits,a=e.loggedIn,n=e.user,r=e.sidebarIsOpen,o=n?{name:n.name,karma:n.comment_karma,img:n.icon_img}:null;return c.a.createElement(f.a,{history:b},c.a.createElement("div",{className:"App"},c.a.createElement(ee,{loggedIn:a,user:o,handleSideBar:this.handleSideBar,onSubmit:this.handleSearch}),c.a.createElement(ae,{subreddits:t,isOpen:r,handleSideBar:this.handleSideBar}),c.a.createElement(E.a,null,c.a.createElement(g.a,{exact:!0,path:"".concat(re,"/"),component:function(e){return c.a.createElement(R,Object.assign({mySubreddits:t,loggedIn:a},e))}}),c.a.createElement(g.a,{path:"".concat(re,"/r/:subreddit/:title"),component:z}),c.a.createElement(g.a,{path:"".concat(re,"/r"),component:x}),c.a.createElement(g.a,{path:"".concat(re,"/search/:query"),component:Q}))))}}]),t}(o.Component),ce=function(e){var t={headers:{Authorization:"bearer ".concat(e)}};return fetch("https://oauth.reddit.com/api/v1/me",t)},le=function(e){var t={headers:{Authorization:"bearer ".concat(e)}};return fetch("https://oauth.reddit.com/subreddits/mine/subscriber",t)},ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function se(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}i.a.render(c.a.createElement(oe,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/ForRedditToGo",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/ForRedditToGo","/service-worker.js");ie?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):se(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):se(e)})}}()}},[[23,2,1]]]);
//# sourceMappingURL=main.ab74b221.chunk.js.map