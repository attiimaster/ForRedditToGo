{"version":3,"sources":["helpers/history.js","helpers/accesstoken.js","helpers/tokenIsValid.js","services/user.service.js","helpers/getHashValue.js","services/auth.service.js","components/ToFrontpageBtn.jsx","containers/About.jsx","helpers/convertToHoursAgo.js","components/AuthorHeader.jsx","helpers/spaceOutNumber.js","components/ThreadStatsBox.jsx","services/speech.service.js","components/ThreadBox.jsx","components/ErrorBox.jsx","components/LoadingScreen.jsx","components/SortBox.jsx","containers/Sub.jsx","helpers/print.js","containers/Synth.jsx","components/MoreButton.jsx","helpers/decodeHtml.js","containers/Thread.jsx","containers/Search.jsx","containers/Frontpage.jsx","components/UserBox.jsx","components/NavBar.jsx","components/SubRedditTab.jsx","App.js","registerServiceWorker.js","index.js"],"names":["createBrowserHistory","get","JSON","parse","localStorage","getItem","set","token","setItem","stringify","remove","removeItem","tokenIsValid","timeRemaining","expires_in","Date","now","console","log","determineSorting","params","generalParam","value","topOfAllParam","top","searchReddit","query","a","fetchReddit","subreddits","posts","fetchFrontpage","mySubreddits","sortParams","map","sub","data","display_name","join","fetchSubreddit","subreddit","fetchRedditThread","id","fetchUserData","Promise","all","fetchWithToken","castVote","dir","postWithToken","path","fetch","res","status","json","accesstoken","reject","options","headers","Authorization","method","fetchMoreAndInsert","link_id","children","listing","parentId","findInListingAndInsert","substring","things","ArraytoInsert","resolve","forEach","comment","i","kind","replies","pop","toInsert","push","findIdInRepliesAndInsert","child","then","catch","err","error","getHashValue","key","matches","window","location","hash","match","RegExp","tryLogin","state","newToken","Number","process","REACT_APP_SECRET_STRING","logout","history","ToFrontpageBtn","className","Link","to","About","Banner","alt","src","Sections","href","target","rel","convertToHoursAgo","converted","Math","round","indexOf","slice","AuthorHeader","props","r","author","date","hoursAgoStr","spaceOutNumber","nbr","toString","split","digit","length","no","alert","synth","voice","ThreadStatsBox","handleVote","type","num_comments","name","onClick","score","url","MediaLink","ThreadBox","subreddit_name_prefixed","created_utc","title","selftext","ErrorBox","LoadingScreen","SortBox","onChange","values","active","defaultValue","v","toLowerCase","topValues","Sub","currentSub","loading","sort","handleSort","bind","this","pathname","setState","e","form","attributes","c","Component","print","toPrint","document","getElementById","insertAdjacentHTML","tries","loadVoices","voices","getVoices","find","test","lang","setTimeout","convertListingToScript","readmode","script","post","comments","cleanString","body","pushReplies","str","replace","speechSynthesis","Synth","logIsOpen","position","isOn","handleLog","handleReadMode","play","back","skip","stop","speaking","cancel","mapScriptToUtteranceQueue","previous","next","icon","SynthBtn","done","text","message","speech","SpeechSynthesisUtterance","volume","rate","pitch","addEventListener","onstart","onend","onpause","onresume","onerror","speak","readOut","MoreButton","parent_id","decodeHtml","html","txt","createElement","innerHTML","Thread","toRead","handleMore","newListing","threadInfo","ThreadHead","selftext_html","Parser","CommentBox","body_html","count","Search","getMoreSubreddits","newQuery","style","width","margin","SubRedditBoxAlt","backgroundImage","community_icon","icon_img","display_name_prefixed","subscribers","public_description","Frontpage","loggedIn","UserBox","user","ActualUserBox","karma","img","LoginButton","REACT_APP_DURATION","REACT_APP_SCOPE","CLIENT_ID","REACT_APP_CLIENT_ID","URI","REACT_APP_URI","NavBar","isHidden","onScroll","scrollY","prev","removeEventListener","handleSideBar","onSubmit","placeholder","SubRedditTab","isOpen","SubRedditBox","uri","App","sidebarIsOpen","handleSearch","preventDefault","sanitizedUser","comment_karma","Router","Switch","Route","exact","render","component","LoginSuccess","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","ReactDOM","URL","origin","response","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.571bae54.chunk.js","sourcesContent":["import { createBrowserHistory } from \"history\";\r\n\r\nexport default createBrowserHistory();","// accesstoken methods\r\n\r\nexport default {\r\n\tget,\r\n\tset,\r\n\tremove\r\n}\r\n\r\nfunction set(token) {\r\n    localStorage.setItem(\"access_token\", JSON.stringify(token));\r\n}\r\n\r\nfunction get() {\r\n\treturn JSON.parse(localStorage.getItem(\"access_token\"));\r\n}\r\n\r\nfunction remove() {\r\n\tlocalStorage.removeItem(\"access_token\");\r\n}","function tokenIsValid(token) {\r\n  const timeRemaining = token.expires_in - (Date.now() / 1000);\r\n  \r\n  if (timeRemaining > 0) {\r\n    console.log(\"timeRemaining:\", timeRemaining + \" sec\");\r\n    return true;\r\n  }    \r\n\r\n  return false;\r\n}\r\n\r\nexport default tokenIsValid;\r\n \r\n\r\n/* \r\nconsole.log(\r\n  \ttokenIsValid({\r\n  \t\tvalue: \"string\",\r\n  \t\texpires_in: Date.now() / 1000 + 3600\r\n  \t})\r\n)\r\n  \r\nconsole.log(\r\n  \ttokenIsValid({\r\n  \t\tvalue: \"string\",\r\n  \t\texpires_in: Date.now() / 1000\r\n  \t})\r\n)\r\n*/","import accesstoken from \"../helpers/accesstoken\";\r\nimport tokenIsValid from \"../helpers/tokenIsValid\";\r\n\r\nexport default {\r\n\tfetchFrontpage,\r\n\tfetchSubreddit,\r\n\tfetchRedditThread,\r\n\tfetchUserData,\r\n\tfetchReddit,\r\n\tfetchWithToken,\r\n\tpostWithToken,\r\n\tfetchMoreAndInsert\r\n}\r\n\r\n// search\r\n\r\n// sort\r\nfunction determineSorting(params) {\r\n\t// also submits parameters like limit oder .json, schlechter name\r\n\tconst generalParam = params ? params.value : \"\";\r\n    const topOfAllParam = generalParam === \"top\" ? `&t=${params.top}` : \"\";\r\n\r\n    return `/${generalParam}.json?limit=100${topOfAllParam}`;\r\n}\r\n\r\n// \r\nfunction getRecommendedSubreddits() {\r\n\treturn [\"askreddit\", \"showerthoughts\"];\r\n}\r\n\r\n\r\n// =========== api ============\r\n\r\nexport async function searchReddit(query) {\r\n    const subreddits = await fetchReddit(`/subreddits/search.json?q=${query}&limit=5`);\r\n   \tconst posts = await fetchReddit(`/search.json?q=${query}`);\r\n\r\n   \treturn { subreddits, posts };\r\n}\r\n\r\nexport function fetchFrontpage(mySubreddits, sortParams) {\r\n    // if user has no subreddits or is not logged in, populate frontpage with predetermined subreddits\r\n    mySubreddits = mySubreddits ?\r\n    \tmySubreddits.map(sub => sub.data.display_name)\r\n    \t:\r\n    \tgetRecommendedSubreddits();\r\n\r\n    return fetchReddit(`/r/${mySubreddits.join(\"+\")}${determineSorting(sortParams)}`)\r\n}\r\n\r\nexport function fetchSubreddit(subreddit, sortParams) {\r\n  \treturn fetchReddit(`/r/${subreddit}${determineSorting(sortParams)}`);\r\n}\r\n\r\nexport function fetchRedditThread(subreddit, id, sortParams) {\r\n  \treturn fetchReddit(`/r/${subreddit}/comments/${id}/.json?sort=${sortParams}&limit=100`);\r\n}\r\n\r\nexport function fetchUserData(token) {\r\n  \treturn Promise.all([\r\n  \t\t// fetch users reddit profile\r\n\t\tfetchWithToken(\"/api/v1/me\", token),\r\n  \t\t// fetch list of users subscribed subreddits\r\n\t\tfetchWithToken(\"/subreddits/mine/subscriber\", token)\r\n\t]);\r\n}\r\n\r\n// vote\r\nexport function castVote(id, dir) {\r\n\t// dir === 1 || -1 and indicates upvote || downvote\r\n\treturn postWithToken(`/api/vote?id=${id}&dir=${dir}`)\r\n}\r\n\r\n\r\n// ========== general purpose ============\r\n\r\nexport async function fetchReddit(path) {\r\n  \tconst res = await fetch(`https://www.reddit.com${path}`);\r\n  \tconsole.log(res.status);\r\n  \treturn res.json();\r\n}\r\n\r\nexport async function fetchWithToken(path, token) {\r\n\ttoken = token || accesstoken.get();\r\n\r\n\tif (!tokenIsValid(token)) {\r\n\t\taccesstoken.remove();\r\n\t\treturn Promise.reject(\"Token is expired.\");\r\n\t}\r\n\r\n\tconst options = {\r\n\t  headers: {\r\n\t    Authorization: `bearer ${token.value}`\r\n\t  }\r\n\t}\r\n\r\n\tconst res = await fetch(`https://oauth.reddit.com${path}`, options);\r\n  \tconsole.log(res.status);\r\n\treturn res.json();\r\n}\r\n\r\nexport async function postWithToken(path) {\r\n// only function that returns res instead of res.json(),\r\n// because it is used exclusively by castVote(), which returns a parsed object\r\n\tconst token = accesstoken.get();\r\n\r\n\tif (!tokenIsValid(token)) {\r\n\t\taccesstoken.remove();\r\n\t\treturn Promise.reject(\"Token is expired.\");\r\n\t}\r\n\r\n\tconst options = {\r\n\t\tmethod: \"POST\",\r\n\t  \theaders: {\r\n\t    \tAuthorization: `bearer ${token.value}`\r\n\t  \t}\r\n\t}\r\n\r\n\tconst res = await fetch(`https://oauth.reddit.com${path}`, options);\r\n\tconsole.log(res.status);\r\n\treturn res;\r\n}\r\n\r\n\r\n// =========== more button functionality ============\r\n\r\nexport async function fetchMoreAndInsert(link_id, children, listing, parentId) {\r\n  \t\r\n  \t// fetch more replies\r\n  \tconst res = await fetchReddit(`/api/morechildren.json?link_id=t3_${link_id}&children=${children.join(\", \")}&api_type=json`)\r\n\r\n  \t// traverse listing to find matching id and append replies ( is currently mutating :S )\r\n  \treturn findInListingAndInsert(listing, parentId.substring(3), res.json.data.things);\r\n}\r\n\r\n// takes listing and additional replies and merges them\r\nfunction findInListingAndInsert(listing, parentId, ArraytoInsert) {\r\n\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t// the comments object is a \"listing\" and NOT the actual array\r\n\t\tconst comments = listing[1].data.children;\r\n\r\n\t\t// loop through comments\r\n\t\tcomments.forEach((comment, i) => {\r\n\t\t\tif (comment.data.id === parentId && comment.kind !== \"more\") {\r\n\t\t\t\t\r\n\t\t\t\t// remove more object\r\n\t\t\t\tcomment.data.replies.data.children.pop();\r\n\t\t\t\t// if comment is parent, insert replies and resolve with new listing\r\n  \t\t\t\tArraytoInsert.map(toInsert => comment.data.replies.data.children.push(toInsert));\r\n\t\t\t\tresolve(listing);\r\n\t\t\t}\r\n\r\n\t\t\t// comment is not parent, but has replies\r\n\t\t\tif (comment.data.replies) {\r\n\r\n\t\t\t\t// look if a reply is the parent \r\n\t\t\t\tfindIdInRepliesAndInsert(comment.data.replies, parentId, ArraytoInsert)\r\n\t\t\t\t.then(listing => listing && resolve(listing))\r\n\t\t\t\t.catch(err => console.error(err))\r\n\t\t\t}\r\n\t\t\t// reject() oder resolve(\"someKindOfErrorMessage\")\r\n\t\t})\r\n\r\n\t})\r\n\r\n\t// recursive function\r\n\tfunction findIdInRepliesAndInsert(replies, parentId, ArraytoInsert) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\t// the replies object is a \"listing\" and NOT the actual array\r\n\t\t\tconst children = replies.data.children;\r\n\r\n\t\t\t// loop over children\r\n\t\t\tchildren.forEach((child, i) => {\r\n\t\t\t\t\r\n\t\t\t\t// check if actual replies and not just links to fetch more replies\r\n\t\t\t\tif (child.data.id === parentId && child.kind !== \"more\") {\r\n\r\n\t\t\t\t\t// remove more object\r\n\t\t\t\t\tchild.data.replies.data.children.pop();\r\n\t\t\t\t\t// .then insert replies\r\n\t  \t\t\t\tArraytoInsert.map(toInsert => child.data.replies.data.children.push(toInsert));\r\n\t\t\t\t\t\r\n\t\t\t\t\tresolve(listing);\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t// reply is not parent, but has replies\r\n\t\t\t\t// call self with the replies of the reply\r\n\t\t\t\tif (child.data.replies) {\r\n\r\n\t\t\t\t\t// look if a reply of reply is the parent \r\n\t\t\t\t\tfindIdInRepliesAndInsert(child.data.replies, parentId, ArraytoInsert)\r\n\t\t\t\t\t.then(listing => resolve(listing)) \r\n\t\t\t\t\t.catch(err => console.err(err))\r\n\t\t\t\t}\r\n\t\t\t});\t\r\n\t\t});\r\n\t}\r\n}","const getHashValue = key => {\r\n\t// if (!key)\r\n  \tconst matches = window.location.hash.match(new RegExp(key+'=([^&]*)'));\r\n  \treturn matches ? matches[1] : null;\r\n}\r\n\r\nexport default getHashValue;","import { fetchUserData } from \"./user.service.js\";\r\nimport getHashValue from \"../helpers/getHashValue\";\r\nimport accesstoken from \"../helpers/accesstoken\";\r\nimport tokenIsValid from \"../helpers/tokenIsValid\";\r\nimport history from \"../helpers/history\";\r\n\r\nexport default {\r\n  tryLogin,\r\n  logout\r\n}\r\n\r\nexport function tryLogin() {\r\n  const token = accesstoken.get();\r\n  \r\n  // check and parse url | values: access_token, token_type, state, expires_in, scope\r\n  const state = getHashValue(\"state\");\r\n  const newToken = {\r\n    value: getHashValue(\"access_token\"),\r\n    expires_in: Date.now() / 1000 + Number(getHashValue(\"expires_in\"))\r\n  }\r\n  \r\n  // validate request and origin\r\n  if (newToken && state === process.env.REACT_APP_SECRET_STRING) {\r\n    console.log(\"setting new token\");\r\n    accesstoken.set(newToken);\r\n    return fetchUserData(newToken);\r\n  }\r\n\r\n  // if no params in url check localStorage\r\n  else if (token && tokenIsValid(token)) {\r\n    return fetchUserData(token);\r\n\r\n  } else {\r\n    accesstoken.remove();\r\n    return Promise.reject(\"not logged in\");\r\n  }\r\n}\r\n\r\nexport function logout() {  \r\n\tconst uri =  process.env.NODE_ENV === \"production\" ? \"/ForRedditToGo\" : \"/x\";\r\n  accesstoken.remove();\r\n\thistory.push(`${uri}/`);\r\n}","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./css/ToFrontpageBtn.css\";\r\n\r\nconst uri =  process.env.NODE_ENV === \"production\" ? \"/ForRedditToGo\" : \"/x\";\r\n\r\nconst ToFrontpageBtn = () => {\r\n  return (\r\n    <div className=\"to-frontpage-container\">\r\n      <Link to={`${uri}/frontpage`}>\r\n        <button className=\"to-frontpage-btn\">To the frontpage</button>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ToFrontpageBtn;","import React from 'react';\r\nimport './css/About.css';\r\n\r\nimport ToFrontpageBtn from \"../components/ToFrontpageBtn\";\r\n\r\nconst About = () => {\r\n  return (\r\n    <div className=\"About\">\r\n      <Banner />\r\n      <Sections />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default About;\r\n\r\nconst Banner = () => {\r\n  return (\r\n    <header className=\"about-banner\">\r\n        <div className=\"banner-text\">\r\n          <h1>For Reddit,To Go</h1>\r\n        </div>\r\n        <img alt=\"\" src={ `${process.env.PUBLIC_URL}/images/walker.png` } />\r\n    </header>\r\n  );\r\n}\r\nconst Sections = () => {\r\n  return (\r\n    <div className=\"container\">\r\n      <section className=\"about-section\">\r\n        <h1>Listen to Reddit, while getting stuff done.</h1>\r\n        <p>Reddit To Go is a web application intended for portable devices that leverages the <b>Text to Speech</b> features of modern browsers to read out reddit threads. For now please consider using the latest version of <b>Google Chrome</b> or <b>Mozilla Firefox</b> to ensure functionality and the best possible user experience.</p>\r\n        <ToFrontpageBtn />\r\n        <p>RedditToGo fits some subreddits more than others. Where it excels are textbased threads and comment trees. Accessing threads that share images, videos or links is possible, but for now you will have to follow the link to the original source to consume it.</p>\r\n        <p>Features like messaging, mod features, etc are not included for now, because this is meant to be a complementary service one can use if needed.</p>\r\n        <p>If you want to suggest or contribute a feature, feel free to contact me on my page or on github.</p> \r\n      </section>\r\n  \r\n      <section className=\"about-section\">\r\n        <h1>How to use / main features</h1>\r\n        <p>When reading a thread a user may use the synthesizer buttons to control the speech synthesis. Pressing <b>PLAY</b> will read the thread from beginning to end. You may skip or relisten to individual posts by using the <b>BACK</b> / <b>SKIP</b> buttons respectively. <b>STOP</b> will halt and cancel all queued messages.</p>\r\n        <p>You may also select a <b>READMODE</b>. For now there is <b>STANDARD</b> and <b>TOP CMNTS</b>. <b>STANDARD</b> will read the thread as is with all comments including some (or all, depending on the volume) high rated replies, while <b>TOP CMNTS</b> only reads out comments without reading out any replies.</p>\r\n        <p>Comments get initialized with the phrase: <i>USERNAME comments...</i> while replies get initialized with <i>USERNAME replies...</i></p>\r\n      </section>\r\n  \r\n      <section className=\"about-section\">\r\n        <h1>Contact</h1>\r\n        <p>If you find any bugs or have suggestions please feel free to contact me on my page or on github. I built this project for myself initially, but figured some people might find it useful. I would be stoked to improve <b>For Reddit, To Go</b> for others aswell.</p>\r\n        \r\n        <div className=\"socialmedia-icons\">\r\n          <a href=\"https://raphaelmayer.github.io/go\" target=\"_blank\" rel=\"noopener noreferrer\"><i className=\"fas fa-envelope\"></i></a>\r\n          <a href=\"https://github.com/raphaelmayer/ForRedditToGo\" target=\"_blank\" rel=\"noopener noreferrer\"><i className=\"fab fa-github\"></i></a>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n}","const convertToHoursAgo = then => {\r\n  // then has to be a UNIX string\r\n  const now = Date.now();\r\n\r\n  // time since \"then\" in seconds\r\n  let converted = Math.round((now - then) / 1000);\r\n\r\n  // determine which unit is appropriate\r\n  if (converted < 10) {\r\n    converted = \"Just now\";\r\n  } else if (converted < 60) {\r\n    converted = Math.round(converted) + \" seconds ago\";\r\n  } else if (converted < 60*60) {\r\n    converted = Math.round(converted / 60) + \" minutes ago\";\r\n  } else if (converted < 60*60*24) {\r\n    converted = Math.round(converted / (60*60)) + \" hours ago\";\r\n  } else if (converted < 60*60*24*30) {\r\n    converted = Math.round(converted / (60*60*24)) + \" days ago\";\r\n  } else if (converted < 60*60*24*365) {\r\n    converted = Math.round(converted / (60*60*24*30)) + \" months ago\";\r\n  } else if (converted >= 60*60*24*365) {\r\n    converted = Math.round(converted / (60*60*24*365)) + \" years ago\";\r\n  }\r\n\r\n  // if singular remove \"s\" from units\r\n  if (converted[0] < 2) {\r\n    const i = converted.indexOf(\"s\");\r\n    converted = converted.slice(0, i) + \" ago\";\r\n  }\r\n  return converted;\r\n}\r\n\r\nexport default convertToHoursAgo;","import React from \"react\";\r\nimport convertToHoursAgo from \"../helpers/convertToHoursAgo\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst uri =  process.env.NODE_ENV === \"production\" ? \"/ForRedditToGo\" : \"/x\";\r\n\r\nconst AuthorHeader = props => {\r\n\tconst { r, author, date } = props;\r\n\tconst hoursAgoStr = convertToHoursAgo(date*1000);\r\n\treturn (\r\n\t\t<small className=\"AuthorHeader\">\r\n\t\t\t<span  className=\"subreddit\"><Link to={ `${uri}/${r}` }>{ r }</Link></span>\r\n\t\t\t<span  className=\"author\"> &#8226; Posted by u/{ author }</span>\r\n\t\t\t<span  className=\"time\"> &#8226; { hoursAgoStr }</span>\r\n\t\t</small>\r\n\t);\r\n}\r\n\r\nexport default AuthorHeader;","function spaceOutNumber(nbr) {\r\n\tif (!nbr || nbr < 1000) return nbr;\r\n\r\n\t// convert to array\r\n\tnbr = nbr.toString().split(\"\");\r\n\r\n\t// add space after 3 digits\r\n\tconst spacedOut = nbr.map((digit, i) => {\r\n\t\tif (i === 0) return digit;\r\n\r\n\t\t// subtract i from length bc it starts at 0 and goes up\r\n\t\tif ((nbr.length - i) % 3 === 0) return ` ${digit}`;\r\n\t\treturn digit;\r\n\t})\r\n\r\n\treturn spacedOut.join(\"\");\r\n}\r\n\r\nexport default spaceOutNumber;","import React from \"react\";\r\nimport \"./css/ThreadStatsBox.css\";\r\n\r\nimport spaceOutNumber from \"../helpers/spaceOutNumber\";\r\n\r\nfunction no() {\r\n\tconsole.log(\"no.\");\r\n\talert(\"no.\");\r\n}\r\n\r\nconst ThreadStatsBox = ({ data, handleVote, type }) => {\r\n\t// type: determine, if children are comments or replies; defaults to \"Comments\"\r\n\treturn (\r\n\t\t<div className=\"ThreadStatsBox\">\r\n\t\t\t<div>\r\n\t\t\t\t<small>\r\n\t\t\t\t\t<span>{ `${spaceOutNumber(data.num_comments) || 0} ${type || \"Comments\"}` }</span>\r\n\t\t\t\t</small>\r\n\t\t\t\t<small className=\"score-mobile\">\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<i className=\"fas fa-arrow-up\" name={ data.name } onClick={ handleVote || no }></i>\r\n\t\t\t\t\t\t{ ` ${spaceOutNumber(data.score)} Upvotes ` }\r\n\t\t\t\t\t\t<i className=\"fas fa-arrow-down\" name={ data.name } onClick={ handleVote || no }></i>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</small>\r\n\t\t\t</div>\r\n\t\t\t<MediaLink url={ data.url } />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ThreadStatsBox;\r\n\r\nconst MediaLink = ({ url }) => {\r\n\tif (url && url.slice(0, 23) !== \"https://www.reddit.com/\") {\r\n\t\treturn (\r\n\t\t\t<div className=\"media-link\">\r\n\t\t\t\t<a href={ url } target=\"_blank\" rel=\"noopener noreferrer\">\r\n\t\t\t\t\t<i className=\"fas fa-link\"></i> \r\n\t\t\t\t\t<span>{ url.split(\"/\")[2] }</span>\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t);\t\t\r\n\t} else {\r\n\t\treturn null;\r\n\t}\r\n}\r\n\r\n","import print from \"../helpers/print\";\r\n\r\nlet synth;\r\nlet voice;\r\n\r\n// load voices, and try again if it fails\r\nlet tries = 0;\r\n\r\nif ('speechSynthesis' in window) {\r\n  synth = window.speechSynthesis;\r\n  loadVoices();\r\n}\r\n\r\nfunction loadVoices() {\r\n\ttries++;\r\n\tconst voices = synth.getVoices();\r\n\tif (voices.length) {\r\n\t\tvoice = voices.find(v => /en[-_]US/.test(v.lang));\t// regex because android\r\n\t}\r\n\tif (!voice) {\r\n\t\tif (tries < 10) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tloadVoices();\r\n\t\t\t}, 250);\r\n\t\t} else {\r\n\t\t\tconsole.error(\"en-US voice not found.\");\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// takes string and starts reading out lout\r\n// done takes (err, event)\r\nexport function readOut(message, done) {\r\n    const speech = new SpeechSynthesisUtterance(message);\r\n\r\n    // find voices\r\n\tloadVoices();\r\n\r\n\t// Set text and voice attributes\r\n\tspeech.lang = \"en-US\";\r\n\tspeech.volume = 1;\r\n\tspeech.rate = 1;\r\n\tspeech.pitch = 1;\r\n\tspeech.voice = voice;\r\n\r\n\t// Custom Error Handler\r\n\tspeech.addEventListener(\"error\", error => console.error(error));\r\n\r\n\t// Register Event Handlers\r\n\tspeech.onstart = (e) => {\r\n\t\tprint(`array char count: ${message.length} (32,767 max)`);\r\n\t\tprint(\"SPEECH started.\");\r\n\t}\r\n\tspeech.onend = (e) => {\r\n\t\tprint(\"SPEECH ended.\");\r\n\t\tdone && done(null, e);\r\n\t}\r\n\tspeech.onpause = () => {\r\n\t\tprint(\"SPEECH paused.\");\r\n\t}\r\n\tspeech.onresume = () => {\r\n\t\tprint(\"SPEECH resumed.\");\r\n\t}\r\n\tspeech.onerror = (e) => {\r\n\t\tprint(`SPEECH ERROR!`);\r\n\t\tdone && done(\"ERROR reading out.\", e);\r\n\t}\r\n\t\r\n\t// start playback\r\n\tsynth.speak(speech);\r\n}\r\n\r\n// makes array of strings to pass to speechSynthesis;\r\nexport function convertListingToScript(listing, readmode) {\r\n\tlet script = [];\r\n\r\n\tconst title =  listing[0].data.children[0].data.title;\r\n\tconst post = listing[0].data.children[0].data.selftext;\r\n\tconst comments = listing[1].data.children;\r\n\r\n\t// push title, post and comments to array in order and read out\r\n\ttitle && script.push(cleanString(title));\r\n\tpost && script.push(cleanString(post));\r\n\r\n\t// push comments and replies to array\r\n\tcomments.forEach((c, i) => {\r\n\t\tscript.push(` ${c.data.author} comments: ? ` + cleanString(c.data.body));\r\n\t\t\r\n\t\tif (readmode === \"STANDARD\") {\r\n\t\t\tpushReplies(c.data.replies, script);\r\n\t\t}\r\n\t});\r\n\treturn script;\r\n}\r\n\r\n// recursively add replies to script array\r\nfunction pushReplies(replies, script) {\r\n\r\n\tif (replies && replies.kind !== \"more\") {\r\n\r\n\t\t// the replies object is a \"listing\" and NOT the actual array\r\n\t\tconst children = replies.data.children;\r\n\r\n\t\t// loop over children\r\n\t\tchildren.forEach((child, i) => {\r\n\r\n\t\t\t// check if actual replies and not just links to fetch more replies\r\n\t\t\tif (child.kind !== \"more\") {\r\n\r\n\t\t\t\t// if it is push reply body to array\r\n\t\t\t\tscript.push(` ${child.data.author} replies: ? ` + cleanString(child.data.body));\r\n\r\n\t\t\t\t// call self with the replies of the reply\r\n\t\t\t\tpushReplies(child.data.replies, script);\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\t\r\n}\r\n\r\n// remove special symbols from strings by defining what NOT to remove\r\nfunction cleanString(str) {\r\n\tif (!str) {\r\n\t\treturn null;\r\n\t}\r\n\treturn str.replace(/[^\\w\\s.:,_$@%;-=`´'/!?]/gi, '');\r\n}","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n// import Parser from \"html-react-parser\";\r\nimport \"./css/ThreadBox.css\";\r\n\r\nimport AuthorHeader from \"../components/AuthorHeader\";\r\nimport ThreadStatsBox from \"../components/ThreadStatsBox\";\r\n// import decodeHtml from \"../helpers/decodeHtml\";\r\n\r\nconst uri =  process.env.NODE_ENV === \"production\" ? \"/ForRedditToGo\" : \"/x\";\r\n\r\nconst ThreadBox = ({ data, handleVote }) => {\r\n\treturn (\r\n\t\t<div className=\"ThreadBox\" >\r\n\r\n\t\t\t<small className=\"score\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div><i className=\"fas fa-arrow-up\" name={ data.name } onClick={ handleVote }></i></div>\r\n\t\t\t\t\t<div>{ data.score }</div>\r\n\t\t\t\t\t<div><i className=\"fas fa-arrow-down\" name={ data.name } onClick={ handleVote }></i></div>\r\n\t\t\t\t</div>\r\n\t\t\t</small>\r\n\t\t\t\r\n\t\t\t<div className=\"content\">\r\n\t\t\t\t<AuthorHeader r={ data.subreddit_name_prefixed } author={ data.author } date={ data.created_utc } />\r\n\r\n\t\t\t\t<Link to={ `${uri}/r/${data.subreddit}/${data.id}` } >\r\n\t\t\t\t\t{ data && <h3>{ data.title }</h3> }\r\n\t\t\t\t\t{ data.selftext && <p className=\"selftext\">{ data.selftext }</p> }\t\t\t\t\r\n\t\r\n\t\t\t\t\t{/* data.media && data.media.reddit_video && <div className=\"media-wrapper\"><iframe className=\"media\" src={ data.media.reddit_video.scrubber_media_url } ></iframe></div> */}\r\n\t\t\t\t\t{/* data.preview && data.preview.reddit_video_preview && <iframe src={ data.preview.reddit_video_preview.scrubber_media_url } ></iframe> */}\r\n\t\t\t\t\t{/* data.media && \"media\" */}\r\n\t\t\t\t\t{/* data.media_embed.content && Parser(decodeHtml(data.media_embed.content)) */}\r\n\t\t\t\t</Link>\r\n\r\n\t\t\t\t<ThreadStatsBox \r\n\t\t\t\t\tdata={{ num_comments: data.num_comments,\r\n\t\t\t\t\t\t\tscore: data.score,\r\n\t\t\t\t\t\t\tname: data.name,\r\n\t\t\t\t\t\t\turl: data.url\r\n\t\t\t\t\t}}\r\n\t\t\t\t\thandleVote={ handleVote }\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ThreadBox;","import React from \"react\";\r\n\r\nconst ErrorBox = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\tThere seems to be an error. Please try again and check your URL.\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default ErrorBox;","import React from \"react\";\r\nimport \"./css/LoadingScreen.css\";\r\n\r\nconst LoadingScreen = () => {\r\n\treturn (\r\n\t\t<div className=\"LoadingScreen\">\r\n\t\t<div>\r\n\t\t\t<div className=\"spinner\"></div>\r\n\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default LoadingScreen;","import React from \"react\";\r\nimport \"./css/SortBox.css\";\r\n\r\n// active.value === sort value like hot, top, controversial\r\n// active.top === sort value for top like week, month, all\r\n\r\nconst SortBox = ({ onChange, values, active }) => {\r\n\treturn (\r\n\t\t<form className=\"SortBox\" onChange={ onChange }>\r\n\t\t\t<span>Sort by</span>\r\n\t\t\t<select defaultValue={ active.value || active }>\r\n\t\t\t\t{ values && values.map((v, i) => <option value={ v.toLowerCase() } key={i} >{ v }</option>) }\r\n\t\t\t</select>\r\n\r\n\t\t\t{ active.top &&\r\n\t\t\t<select defaultValue={ active.top } className={ active.value === \"top\" ? \"SortBox-top SortBox-top-active\" : \"SortBox-top\" }>\r\n\t\t\t\t{ topValues.map((v, i) => <option value={ v.toLowerCase() } key={i} >{ v }</option>) }\r\n\t\t\t</select>\r\n\t\t\t}\r\n\t\t</form>\r\n\t);\r\n}\r\n\r\nexport default SortBox;\r\n\r\nconst topValues = [\"Hour\", \"Day\", \"Week\", \"Month\", \"Year\", \"All\"];","import React, { Component } from 'react';\r\nimport './css/Sub.css';\r\n\r\nimport { fetchSubreddit, castVote } from \"../services/user.service.js\";\r\n\r\nimport ThreadBox from \"../components/ThreadBox\";\r\nimport ErrorBox from \"../components/ErrorBox\";\r\nimport LoadingScreen from \"../components/LoadingScreen\";\r\nimport SortBox from \"../components/SortBox\";\r\n\r\nclass Sub extends Component {\r\n  constructor() {\r\n\t\tsuper();\r\n\t\tthis.state = { listing: null, currentSub: null, loading: true, sort: { value: \"hot\", top: \"hour\" } };\r\n    this.handleSort = this.handleSort.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n  \tconst subreddit = this.props.location.pathname.split(\"/\")[3];\r\n  \t\r\n  \tfetchSubreddit(subreddit)\r\n  \t.then(data => this.setState({ listing: data, currentSub: subreddit, loading: false }))\r\n  \t.catch(err => this.setState({ listing: null, currentSub: subreddit, loading: false }))\r\n  }\r\n  \r\n  componentDidUpdate() {\r\n  \tconst subreddit = this.props.location.pathname.split(\"/\")[3];\r\n    const { loading, currentSub, sort } = this.state;\r\n  \t\r\n    if (!loading && currentSub !== subreddit) {\r\n      this.setState({ loading: true });\r\n\r\n      fetchSubreddit(subreddit, sort)\r\n  \t\t.then(data => this.setState({ listing: data, currentSub: subreddit, loading: false }))\r\n  \t\t.catch(err => this.setState({ listing: null, currentSub: subreddit, loading: false }))\r\n  \t}\r\n  }\r\n  \r\n  handleSort(e) {\r\n    const sort = { value: e.target.form[0].value, top: e.target.form[1].value };\r\n    const subreddit = this.props.location.pathname.split(\"/\")[3];\r\n    \r\n    this.setState({ loading: true, sort });\r\n\r\n    fetchSubreddit(subreddit, sort)\r\n    .then(data => this.setState({ listing: data, currentSub: subreddit, loading: false }))\r\n    .catch(err => this.setState({ listing: null, currentSub: subreddit, loading: false }))\r\n  }\r\n\r\n  handleVote(e) {\r\n    const name = e.target.attributes.name.value;\r\n    const dir = e.target.className === \"fas fa-arrow-up\" ? \"1\" : \"-1\";\r\n    e.target.className += \" orange\";\r\n\r\n    castVote(name, dir)\r\n    .then(data => {\r\n      console.log(data);\r\n    })\r\n    .catch(err => console.error(err)) \r\n  }\r\n  \r\n  render() {\r\n\tconst { listing, loading, sort } = this.state;\r\n    \r\n\t\tif (loading) {\r\n      return ( <LoadingScreen /> );\r\n\r\n    } else if (listing && listing.data) {\r\n      const children = listing.data.children;\r\n\r\n      return (\r\n        <div className=\"Sub\">\r\n\r\n          <div className=\"container\">\r\n\r\n            <header className=\"SubTitle\">\r\n              <h2>r/{ children[0] && children[0].data.subreddit }</h2>\r\n            </header>\r\n\r\n            <SortBox onChange={ this.handleSort } active={ sort } values={[ \"Hot\", \"New\", \"Controversial\", \"Top\" ]} />\r\n            { children.map((c, i) => <ThreadBox { ...c } handleVote={ this.handleVote } key={i} /> )}\r\n          \r\n          </div>\r\n        </div>\r\n      );\r\n    \r\n    } else {\r\n      return ( <ErrorBox /> );\r\n\t  }\r\n\t}\r\n}\r\n\r\nexport default Sub;\r\n\r\n","// print to Log\r\nconst print = toPrint => {\r\n\tconst log = document.getElementById(\"log\");\r\n\tlog && log.insertAdjacentHTML(\"beforeend\", `<small><b>${toPrint}</b></small>`);\r\n}\r\n\r\nexport default print;\r\n    ","import React, { Component } from \"react\";\r\nimport \"./css/Synth.css\";\r\n\r\nimport { readOut, convertListingToScript } from \"../services/speech.service.js\";\r\nimport print from \"../helpers/print\";\r\n\r\nclass Synth extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { \r\n\t\t\tlogIsOpen: false, \r\n\t\t\tlisting: null,\r\n\t\t\treadmode: \"STANDARD\", // STANDARD, TOP_COMMENTS, COMMENT_TREE\r\n\t\t\tscript: null,\r\n\t\t\tposition: 0,\r\n\t\t\tisOn: false\r\n\t\t};\r\n\t\tthis.handleLog = this.handleLog.bind(this);\r\n\t\tthis.handleReadMode = this.handleReadMode.bind(this);\r\n\t\tthis.play = this.play.bind(this);\r\n\t\tthis.back = this.back.bind(this);\r\n\t\tthis.skip = this.skip.bind(this);\r\n\t\tthis.stop = this.stop.bind(this);\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\tconst { listing } = this.props;\r\n\t\tlisting && this.setState({ listing });\r\n\t}\r\n\r\n\t// button handlers\r\n\tplay(e) {\r\n\t\tconst { listing, position, readmode } = this.state;\r\n\t\t\r\n\t\t// START\r\n\t\tif (!window.speechSynthesis.speaking) {\r\n\t\t\tprint(\"START EVENT\");\r\n\r\n\t\t\t// convert listing to an array of strings\r\n\t\t\t// where each item represents one title, post, comment or reply\r\n\t\t\tconst script = convertListingToScript(listing, readmode);\r\n\r\n\t\t\t// push all items onto the utterance queue with a callback\r\n\t\t\tmapScriptToUtteranceQueue(position, script, (err, e) => {\r\n\t\t\t\tthis.setState({ position: this.state.position + 1 });\r\n\t\t\t});\r\n\r\n\t\t\t// set state to track position for back and skip functionality\r\n\t\t\tthis.setState({ isOn: true, script, position });\r\n\r\n\t\t// PAUSE\r\n\t\t} else {\r\n\t\t\tprint(\"TOGGLE PAUSE EVENT\");\r\n\t\t\twindow.speechSynthesis.cancel();\r\n\r\n\t\t\t// cancel() increments position once, see readOut callback\r\n\t\t\tthis.setState({ isOn: false, position: position - 1 });  \r\n\t\t}\r\n\t}\r\n\tback(e) {\r\n\t\tprint(\"BACK EVENT\");\r\n\t\tconst { script, position } = this.state;\r\n\t\tconst previous = position < 2 ? 0 : position - 1;\r\n\r\n\t\tmapScriptToUtteranceQueue(previous, script, (err, e) => {\r\n\t\t\tthis.setState({ position: this.state.position + 1 });\r\n\t\t});\r\n\t\t\r\n\t\t// cancel() increments position once, see readOut callback \t\r\n\t\tif (window.speechSynthesis.speaking) {\r\n\t\t\tthis.setState({ position: previous - 1, isOn: true });  \r\n\t\t} else {\r\n\t\t\tthis.setState({ position: previous, isOn: true });  \r\n\t\t}\r\n\t}\r\n\tskip(e) {\r\n\t\tprint(\"SKIP EVENT\");\r\n\t\tconst { script, position } = this.state;\r\n\t\tconst next = position + 1;\r\n\r\n\t\tmapScriptToUtteranceQueue(next, script, (err, e) => {\r\n\t\t\tthis.setState({ position: this.state.position + 1 });\r\n\t\t});\r\n\r\n\t\t// cancel() increments position once, see readOut callback\r\n\t\tif (window.speechSynthesis.speaking) {\r\n\t\t\tthis.setState({ position: next - 1, isOn: true });\r\n\t\t} else {\r\n\t\t\tthis.setState({ position: next, isOn: true });\r\n\t\t}\r\n\t}\r\n\tstop(e) {\r\n\t\tprint(\"STOP EVENT\");\r\n\t\tconst { isOn } = this.state;\r\n\t\twindow.speechSynthesis.cancel();\r\n\r\n\t\t// cancel() increments position once, see readOut callback\r\n\t\t// isOn to prevent multiple clicks\r\n\t\tisOn && this.setState({ isOn: false, position: -1, script: null }); \r\n\t}\r\n\r\n\thandleLog(e) {\r\n\t\tthis.setState({ logIsOpen: !this.state.logIsOpen });\r\n\t}\r\n\r\n\thandleReadMode(e) {\r\n\t\tthis.setState({ readmode: e.target.value });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { logIsOpen, isOn, readmode, position, script } = this.state;\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"Synth\">\r\n\r\n\t\t\t\t<i onClick={ this.handleLog } className=\"fas fa-bars\"></i>\r\n\t\t\t\t<div id=\"log\" className={ logIsOpen ? \"\" : \"hidden\" }><p><u>DebugLog</u></p></div>\r\n\t\t\t\t<div className=\"synth-name\">Synthesizer 2000</div>\r\n\t\t\t\r\n\t\t\t\t<div className=\"readmode\">Mode: \r\n\t\t\t\t\t<select onChange={ this.handleReadMode } value={ readmode } >\r\n\t\t\t\t\t\t<option value=\"STANDARD\">Standard</option>\r\n\t\t\t\t\t\t<option value=\"TOP_COMMENTS\">Top cmnts</option>\r\n\t\t\t\t\t</select>\r\n\t\t\t\t\t<span className=\"position\">{ `${position} / ${script ? script.length : \" - \" }` }</span>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"synth-btn-container\">\t\r\n\t\t\t\t\t<SynthBtn icon={ isOn ? \"fas fa-pause\" : \"fas fa-play\" } onClick={ this.play } />\r\n\t\r\n\t\t\t\t\t<SynthBtn icon=\"fas fa-backward\" onClick={ this.back } />\r\n\r\n\t\t\t\t\t<SynthBtn icon=\"fas fa-forward\" onClick={ this.skip } />\r\n\t\r\n\t\t\t\t\t<SynthBtn icon=\"fas fa-stop\" onClick={ this.stop } />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Synth;\r\n\r\nconst SynthBtn = ({ icon, onClick }) => {\r\n\treturn (\r\n\t\t<div  className=\"synth-btn\" onClick={ onClick } >\r\n\t\t\t<i className={ icon } id=\"playbtn\"></i>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction mapScriptToUtteranceQueue(position, script, done) {\r\n\twindow.speechSynthesis.cancel();\r\n\r\n\t// slice complete script at new position and map to readOut\r\n\tscript.slice(position, script.length).forEach(text => {\r\n\t\ttext && readOut(text, (err, e) => {\r\n\t\t\t\r\n\t\t\tif (err) console.error(err);\r\n\r\n\t\t\tdone(null, e);\r\n\t\t});\r\n\t});\r\n}","import React from \"react\";\r\n\r\nconst MoreButton = ({ onClick, text, data }) => {\r\n\t// data && to prevent crash when using the search feature\r\n\tconst children = data && data.children;\r\n\tconst parentId = data && data.parent_id;\r\n\r\n\treturn (\r\n\t\t<button onClick={ e => onClick(e, children, parentId) } className=\"MoreButton\">{ `${text}` }</button>\r\n\t);\r\n}\r\n\r\nexport default MoreButton;","const decodeHtml = (html) => {\r\n    var txt = document.createElement(\"textarea\");\r\n    txt.innerHTML = html;\r\n    return txt.value;\r\n}\r\n\r\nexport default decodeHtml;\r\n  ","import React, { Component } from 'react';\r\nimport Parser from \"html-react-parser\";\r\nimport './css/Thread.css';\r\n\r\nimport Synth from \"../containers/Synth\";\r\nimport ErrorBox from \"../components/ErrorBox\";\r\nimport LoadingScreen from \"../components/LoadingScreen\";\r\nimport AuthorHeader from \"../components/AuthorHeader\";\r\nimport SortBox from \"../components/SortBox\";\r\nimport MoreButton from \"../components/MoreButton\";\r\nimport ThreadStatsBox from \"../components/ThreadStatsBox\";\r\n\r\nimport { fetchRedditThread, fetchMoreAndInsert, castVote } from \"../services/user.service.js\";\r\nimport convertToHoursAgo from \"../helpers/convertToHoursAgo\";\r\nimport decodeHtml from \"../helpers/decodeHtml\";\r\n\r\nclass Thread extends Component {\r\n  \tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = { listing: null, loading: true, toRead: null, sort: \"Best\" }\r\n\t\tthis.handleSort = this.handleSort.bind(this);\r\n\t\tthis.handleMore = this.handleMore.bind(this);\r\n  \t}\r\n  \t\r\n  \tcomponentDidMount() {\r\n  \t\tconst subreddit = this.props.location.pathname.split(\"/\")[3];\r\n  \t\tconst threadId = this.props.location.pathname.split(\"/\")[4];\r\n  \t\t\r\n  \t\tfetchRedditThread(subreddit, threadId)\r\n  \t\t.then(data => this.setState({ listing: data, loading: false }))\r\n  \t\t.catch(err => this.setState({ listing: null, loading: false }));\r\n  \t}\r\n\r\n  \thandleSort(e) {\r\n    \tthis.setState({ loading: true, sort: e.target.value });\r\n    \t\r\n  \t\tconst subreddit = this.props.location.pathname.split(\"/\")[3];\r\n  \t\tconst threadId = this.props.location.pathname.split(\"/\")[4];\r\n  \t\t\r\n  \t\tfetchRedditThread(subreddit, threadId, e.target.value)\r\n  \t\t.then(data => this.setState({ listing: data, loading: false }))\r\n  \t\t.catch(err => this.setState({ listing: null, loading: false }))\r\n  \t}\r\n\r\n  \thandleVote(e) {\r\n  \t\tconst name = e.target.attributes.name.value;\r\n  \t\tconst dir = e.target.className === \"fas fa-arrow-up\" ? \"1\" : \"-1\";\r\n  \t\te.target.className += \" orange\";\r\n\r\n    \tcastVote(name, dir)\r\n  \t\t.then(data => {\r\n  \t\t\tconsole.log(data);\r\n  \t\t})\r\n  \t\t.catch(err => console.error(err))\t\r\n  \t}\r\n\r\n  \thandleMore(e, children, parentId) {\r\n  \t\tconst { listing } = this.state;\r\n  \t\tconst link_id = listing[0].data.children[0].data.id;\r\n\r\n  \t\t// fetch more replies\r\n  \t\tfetchMoreAndInsert(link_id, children, listing, parentId)\r\n  \t\t.then(newListing => this.setState({ listing: newListing }))\r\n  \t\t.catch(err => console.error(err))\r\n  \t}\r\n\r\n  \trender() {\r\n\t\tconst { listing, loading, sort } = this.state;\r\n\t\tconsole.log(\"listing\", listing);\r\n\t\tconsole.log(\"should log\");\r\n\t\tif (loading) {\r\n\t\t\treturn ( <LoadingScreen /> );\r\n\r\n\t  \t} else if (listing) {\r\n\t\t\tconst threadInfo = listing[0].data.children[0];\r\n\t\t\tconst comments = listing[1].data.children;\r\n\r\n\t\t\treturn (\r\n\t\t\t  \t<div className=\"Thread\">\r\n\t\t\t  \t\t<Synth listing={ listing } />\r\n\t\t\t  \t\t<div className=\"container\">\r\n\t\t\t  \t\t\t<ThreadHead { ...threadInfo } handleVote={ this.handleVote } />\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<SortBox onChange={ this.handleSort } active={ sort } values={[ \"Best\", \"Top\", \"New\", \"Controversial\",  \"Old\" ]} />\r\n\t\t\t\t\t\t\t{ comments && comments.map((c, i) => <CommentBox key={i} { ...c } handleVote={ this.handleVote } handleMore={ this.handleMore } />) }\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t  \t</div>\r\n\t\t\t);\r\n\t\t\r\n\t\t} else {\r\n\t  \t\treturn ( <ErrorBox /> );\r\n\t  \t}\r\n  \t}\r\n}\r\n\r\nexport default Thread;\r\n\r\nconst ThreadHead = ({ data, handleVote }) => {\r\n\treturn (\r\n\t\t<article className=\"ThreadHead\">\r\n\t\t\t<AuthorHeader r={ data.subreddit_name_prefixed } author={ data.author } date={ data.created_utc } />\r\n\r\n\t\t\t<header>\r\n\t\t\t\t<h2>{ data.title }</h2>\r\n\t\t\t</header>\r\n\r\n\t\t\t{/* data.media && data.media.reddit_video && <iframe src={ data.media.reddit_video.scrubber_media_url } width={ data.media.reddit_video.width } ></iframe> */}\r\n\t\t\t{/* data.preview && data.preview.reddit_video_preview && <iframe src={ data.preview.reddit_video_preview.scrubber_media_url } ></iframe> */}\r\n\t\t\t{/* data.media_embed.content && Parser(decodeHtml(data.media_embed.content)) */}\r\n\t\t\t{ data.selftext_html && <div>{ Parser(decodeHtml(data.selftext_html)) }</div> }\r\n\r\n\t\t\t<ThreadStatsBox \r\n\t\t\t\tdata={{ num_comments: data.num_comments,\r\n\t\t\t\t\t\tscore: data.score,\r\n\t\t\t\t\t\tname: data.name,\r\n\t\t\t\t\t\turl: data.url\r\n\t\t\t\t}}\r\n\t\t\t\thandleVote={ handleVote }\r\n\t\t\t/>\r\n\t\t</article>\r\n\t);\r\n}\r\n\r\nconst CommentBox = ({ data, handleVote, handleMore }) => {\r\n\tif (!data) { console.error(\"\") }\r\n\tconst hoursAgoStr = data && convertToHoursAgo(data.created_utc*1000);\r\n\treturn (\r\n\t\t<div className=\"CommentBox\">\r\n\t\t\t<div className=\"content\">\r\n\t\t\t\t<small className=\"author\">{ data.author } &#8226; { hoursAgoStr } </small>\r\n\t\t\t\t<div>{ Parser(decodeHtml(data.body_html)) }</div>\r\n\r\n\r\n\t\t\t\t<ThreadStatsBox \r\n\t\t\t\t\tdata={{ num_comments: data.replies && data.replies.data.children.length,\r\n\t\t\t\t\t\t\tscore: data.score,\r\n\t\t\t\t\t\t\tname: data.name,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\thandleVote={ handleVote } \r\n\t\t\t\t\ttype={ \"Replies\" }\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<br />\r\n\t\t\t\t{/* loop over replies and check if reply === comment || link id to more*/}\r\n\t\t\t\t{\r\n\t\t\t\t\tdata.replies && data.replies.data.children && data.replies.data.children.map((r, i) => r.kind === \"more\" ? \r\n\t\t\t\t\t\t<MoreButton key={i} { ...r } onClick={ handleMore } text={ `${r.data.count} more replies` } />\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\tr.data && <CommentBox { ...r } key={i} handleVote={ handleVote } handleMore={ handleMore } />)\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./css/Search.css\";\r\n\r\nimport { searchReddit, fetchReddit } from \"../services/user.service.js\";\r\nimport spaceOutNumber from \"../helpers/spaceOutNumber\";\r\n\r\nimport ThreadBox from \"../components/ThreadBox\";\r\nimport ErrorBox from \"../components/ErrorBox\";\r\nimport LoadingScreen from \"../components/LoadingScreen\";\r\nimport MoreButton from \"../components/MoreButton\";\r\n\r\nconst uri =  process.env.NODE_ENV === \"production\" ? \"/ForRedditToGo\" : \"/x\";\r\n\r\nclass Search extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = { loading: true, query: null, posts: null, subreddits: null }\r\n\t\tthis.getMoreSubreddits = this.getMoreSubreddits.bind(this);\r\n\t}\r\n\r\n\tasync componentDidMount() {   \r\n\t\tconst query = this.props.location.pathname.split(\"/\")[3];\r\n\r\n\t\tconst { subreddits, posts } = await searchReddit(query);\r\n\r\n    \tthis.setState({\r\n\t\t\tposts, \r\n    \t\tsubreddits, \r\n    \t\tloading: false, \r\n    \t\tquery\r\n    \t})\r\n\t}\r\n\r\n\tasync componentDidUpdate() {\r\n\t\tconst { query, loading } = this.state;\r\n  \t\tconst newQuery = this.props.location.pathname.split(\"/\")[3];\r\n\r\n  \t\tif (!loading && query !== newQuery) {\r\n        \tthis.setState({ loading: true });\r\n\r\n        \tconst { subreddits, posts } = await searchReddit(newQuery);\r\n\t\r\n    \t\tthis.setState({\r\n    \t\t\tsubreddits,\r\n\t\t\t\tposts,  \r\n    \t\t\tloading: false, \r\n    \t\t\tquery: newQuery\r\n    \t\t})\t\r\n\t\t}\r\n\t}\r\n\r\n\tasync getMoreSubreddits() {\r\n\t\tconst { query } = this.state;\r\n\t\tconst subreddits = await fetchReddit(`/subreddits/search.json?q=${query}&limit=25`);\r\n    \tthis.setState({ subreddits });\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { posts, subreddits, loading, query } = this.state;\r\n\r\n\t\tif (loading) {\r\n    \t  \treturn ( <LoadingScreen /> );\r\n\t\r\n    \t} else if ((posts && subreddits) || subreddits || posts) {\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"Search\">\r\n\t\r\n\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t<header className=\"SearchTitle\">\r\n\t\t\t\t\t\t\t<h2>Search results for <u>{ query }</u>:</h2>\r\n\t\t\t\t\t\t</header>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<section className=\"search-results\">\r\n\t\t\t\t\t\t\t<h3>Subreddits</h3>\r\n\t\t\t\t\t\t\t{ subreddits.data.children[0] ? subreddits.data.children.map((c, i) => <SubRedditBoxAlt { ...c } key={i} />) : <small>Wow, much empty o.O</small> }\r\n\t\t\t\t\t\t\t<MoreButton onClick={ this.getMoreSubreddits } text=\"Show more results\" />\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<div style={{ width: \"100%\", margin: \"40px auto\" }}></div>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<section className=\"search-results\">\r\n\t\t\t\t\t\t\t<h3>Posts</h3>\r\n\t\t\t\t\t\t\t{ posts.data.children[0] ? posts.data.children.map((c, i) => <ThreadBox { ...c } key={i} />) : <small>Wow, much empty o.O</small> }\r\n\t\t\t\t\t\t</section>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\r\n// if status code || ganz weg\r\n\t\t} else {\r\n\t\t\treturn (<ErrorBox />);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default Search;\r\n\r\nconst SubRedditBoxAlt = ({ data }) => {\r\n\tconsole.log(data)\r\n\treturn (\r\n\t\t<Link to={ `${uri}/r/${data.display_name}` } >\r\n\t\t<div className=\"SubRedditBoxAlt\">\r\n\t\t\t<div className=\"head\">\r\n\t\t\t\t<div className=\"subreddit-box-img\" style={{ backgroundImage: `url(${data.community_icon || data.icon_img})` }}></div>\r\n\t\t\t\t\r\n\t\t\t\t<div className=\"title\">\r\n\t\t\t\t\t<p><b>{ data.display_name_prefixed }</b></p>\r\n\t\t\t\t\t<small>{ spaceOutNumber(data.subscribers) } Subscribers</small>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<small className=\"description\">{ data.public_description || data.title }</small>\r\n\t\t</div>\r\n\t\t</Link>\r\n\t);\r\n}","import React, { Component } from 'react';\r\nimport './css/Frontpage.css';\r\n\r\nimport ThreadBox from \"../components/ThreadBox\";\r\nimport ErrorBox from \"../components/ErrorBox\";\r\nimport SortBox from \"../components/SortBox\";\r\nimport LoadingScreen from \"../components/LoadingScreen\";\r\n\r\nimport { fetchFrontpage } from \"../services/user.service.js\";\r\n// import history from \"../helpers/history\";\r\n      \r\n// const uri =  process.env.NODE_ENV === \"production\" ? \"/ForRedditToGo\" : \"/x\";\r\n\r\nclass Frontpage extends Component {\r\n  constructor(props) {\r\n\tsuper(props);\r\n\tthis.state = { listing: null, loading: true, sort: { value: \"Hot\", top: \"Hour\" } };\r\n  this.handleSort = this.handleSort.bind(this);\r\n  }\r\n  componentDidMount() {\r\n    const { mySubreddits, loggedIn } = this.props;\r\n\r\n    fetchFrontpage(mySubreddits)\r\n    .then(data => this.setState({ listing: data, loading: false }))\r\n    .catch(err => console.error(err))\r\n  }\r\n  \r\n  handleSort(e) {\r\n    const { mySubreddits, loggedIn } = this.props;\r\n    const sort = { value: e.target.form[0].value, top: e.target.form[1].value };\r\n    \r\n    this.setState({ loading: true, sort });\r\n\r\n    fetchFrontpage(mySubreddits, sort)\r\n    .then(data => this.setState({ listing: data, loading: false }))\r\n    .catch(err => console.error(err))\r\n  }\r\n\r\n  render() {\r\n    const { listing, loading, sort } = this.state;\r\n\r\n    if (loading) {\r\n      return ( <LoadingScreen /> );\r\n    \r\n    } else if (listing) {\r\n\t    return (\r\n\t      <div className=\"Frontpage\">\r\n\r\n          <div className=\"container\">\r\n          \r\n            <header className=\"SubTitle\">\r\n              <h2>Frontpage</h2>\r\n            </header>\r\n\r\n            <SortBox onChange={ this.handleSort } active={ sort } values={[ \"Hot\", \"New\", \"Controversial\", \"Top\" ]} />\r\n            { listing.data.children.map((post, i) => <ThreadBox { ...post } key={i} />) }\r\n          \r\n          </div>\r\n\t      </div>\r\n\t    );\r\n    } else {\r\n      return ( <ErrorBox /> );\r\n    }\r\n  }\r\n}\r\n\r\nexport default Frontpage;","import React from \"react\";\r\nimport \"./css/UserBox.css\";\r\n// import history from \"../helpers/history\";\r\n\r\nconst UserBox = ({ loggedIn, user, logout }) => {\r\n\treturn (\r\n\t\t<div className=\"login-user-field\">\r\n\t\t{\r\n\t\t\tloggedIn && user ? <ActualUserBox user={ user } logout={ logout } /> : <LoginButton />\r\n\t\t}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default UserBox;\r\n\r\nconst ActualUserBox = ({ user, logout }) => {\r\n\treturn (\r\n\t\t<div className=\"UserBox\">\r\n\t\t\t<div className=\"name-karma-container\">\r\n\t\t\t\t<div className=\"name\">{ user.name }</div>\r\n\t\t\t\t<div className=\"karma\">{ user.karma } Karma</div>\r\n\t\t\t</div>\r\n\t\t\t<img src={ user.img } alt=\"user_image\" />\r\n\t\t\t<button onClick={ logout } className=\"logout-btn\">Logout</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst LoginButton = () => {\r\n\tconst { REACT_APP_DURATION, REACT_APP_SCOPE, REACT_APP_SECRET_STRING } = process.env;\r\n\tconst CLIENT_ID = process.env.NODE_ENV === \"production\" ? process.env.REACT_APP_CLIENT_ID : process.env.REACT_APP_CLIENT_ID_DEV;\r\n\tconst URI = process.env.NODE_ENV === \"production\" ? process.env.REACT_APP_URI : process.env.REACT_APP_URI_DEV;\r\n\treturn (\r\n\t\t<a className=\"login-btn\"\r\n\t\t\thref={ `https://www.reddit.com/api/v1/authorize\r\n\t\t\t?client_id=${CLIENT_ID}\r\n\t\t\t&response_type=token\r\n\t\t\t&state=${REACT_APP_SECRET_STRING}\r\n\t\t\t&redirect_uri=${URI}\r\n\t\t\t&duration=${REACT_APP_DURATION}\r\n\t\t\t&scope=${REACT_APP_SCOPE}` }>\r\n\t\t    <i className=\"fas fa-user\"></i>\r\n\t\t</a>\r\n\t);\r\n}","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./css/NavBar.css\";\r\n\r\nimport UserBox from \"./UserBox\";\r\n\r\nconst uri =  process.env.NODE_ENV === \"production\" ? \"/ForRedditToGo\" : \"/x\";\r\n\r\nclass NavBar extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { isHidden: false };    \r\n\t\tthis.onScroll = () => {  \r\n  \t\t    if (window.scrollY > this.prev) {\r\n\t\t\t\tthis.setState({ isHidden: true });\r\n  \t\t    } else {\r\n  \t\t        this.setState({ isHidden: false });\r\n  \t\t    }\r\n  \t\t    this.prev = window.scrollY;\r\n  \t\t}\r\n  \t}\r\n  \tcomponentDidMount() {\r\n  \t  window.addEventListener(\"scroll\", this.onScroll);\r\n  \t}\r\n  \tcomponentWillUnmount() {\r\n  \t  window.removeEventListener(\"scroll\", this.onScroll);\r\n  \t}\r\n\r\n  \trender() {\r\n\t\tconst { loggedIn, user, handleSideBar, onSubmit, logout } = this.props;\r\n\t\tconst { isHidden } = this.state;\r\n\t\r\n\t\treturn (\r\n\t\t\t<nav  className={ isHidden ? \"navbar hide\" : \"navbar\" } >\r\n\t\t\t\t\r\n\t\t\t\t<i onClick={ handleSideBar } className=\"fas fa-bars\"></i>\r\n\t\t\t\t\r\n\t\t\t\t<Link to={`${uri}/`} className=\"link\"><div className=\"logo\">For Reddit To Go</div></Link>\t\r\n\t\r\n\t\t\t\t<form onSubmit={ onSubmit } >\r\n\t\t\t\t\t<input type=\"text\" placeholder=\"search reddit\" />\r\n\t\t\t\t\t<button type=\"submit\"><i className=\"fas fa-search\"></i></button>\r\n\t\t\t\t</form>\r\n\t\r\n\t\t\t\t<UserBox loggedIn={ loggedIn } user={ user } logout={ logout } />\r\n\t\r\n\t\t\t</nav>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default NavBar;","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./css/SubRedditTab.css\";\r\n\r\nconst uri =  process.env.NODE_ENV === \"production\" ? \"/ForRedditToGo\" : \"/x\";\r\n\r\nconst SubRedditTab  = ({ subreddits, isOpen, handleSideBar, loggedIn }) => {\r\n\treturn (\r\n\t\t<div className={ isOpen ? \"SubRedditTab SubRedditTab-active\" : \"SubRedditTab\" }>\r\n\t\t\t<div className=\"sub-reddit-tab-top\">\r\n\t\t\t\t<Link className=\"logo\" to={ `${uri}/` } onClick={ handleSideBar }>For Reddit To Go</Link>\r\n\t\t\t\t<i className=\"fas fa-times\" onClick={ handleSideBar }></i>\r\n\t\t\t</div>\t\r\n\t\t\t\t\t\t\r\n\t\t\t<div className=\"about-link\"><Link to={`${uri}/about/`} >About</Link></div>\r\n\t\t\t\r\n\t\t\t{ subreddits && subreddits.map((sub, i) => <SubRedditBox handleSideBar={ handleSideBar } key={i} { ...sub } />)}\r\n\t\t\t{ !subreddits && <div className=\"not-logged-in\">Log in to see a list of your subscribed subreddits.</div> }\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default SubRedditTab;\r\n\r\n\r\nconst SubRedditBox = ({ data, handleSideBar }) => {\r\n\r\n\treturn (\r\n\t\t<Link to={ `${uri}/r/${data.display_name}` } onClick={ handleSideBar } className=\"subreddit-box\">\r\n\t\t\t<div className=\"subreddit-box-img\" style={{ backgroundImage: `url(${data.community_icon || data.icon_img})` }}></div>\r\n\t\t\t<h3>{ data.display_name_prefixed }</h3>\r\n\t\t</Link>\r\n\t);\r\n}","import React, { Component } from 'react';\r\nimport { Router, Route, Switch } from \"react-router-dom\";\r\nimport history from \"./helpers/history\";\r\nimport './App.css';\r\n\r\n// import config from \"./config\";\r\nimport { tryLogin, logout } from \"./services/auth.service.js\";\r\n\r\nimport About from \"./containers/About\";\r\nimport Sub from \"./containers/Sub\";\r\nimport Thread from \"./containers/Thread\";\r\nimport Search from \"./containers/Search\";\r\nimport Frontpage from \"./containers/Frontpage\";\r\n\r\nimport NavBar from \"./components/NavBar\";\r\nimport SubRedditTab from \"./components/SubRedditTab\";\r\n      \r\nconst uri =  process.env.NODE_ENV === \"production\" ? \"/ForRedditToGo\" : \"/x\";\r\n\r\nclass App extends Component {\r\n  \tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = { user: null, mySubreddits: null, loggedIn: false, sidebarIsOpen: false }\r\n    this.handleSideBar = this.handleSideBar.bind(this);\r\n    this.handleSearch = this.handleSearch.bind(this);\r\n    this.logout = this.logout.bind(this);\r\n  \t}\r\n\r\n  \tcomponentDidMount() {\r\n      tryLogin()\r\n        .then(data => {\r\n          this.setState({\r\n            user: data[0],\r\n            mySubreddits: data[1].data.children,\r\n            loggedIn: true \r\n          });\r\n          // history.push(`${uri}/frontpage`);\r\n        })\r\n        .catch(err => {\r\n          console.error(err);\r\n        })\r\n  \t}\r\n\r\n    handleSideBar(e) {\r\n        this.setState({ sidebarIsOpen: !this.state.sidebarIsOpen });\r\n    }\r\n\r\n  \thandleSearch(e) {\r\n      e.preventDefault();\r\n      const query = e.target[0].value;\r\n      history.push(`${uri}/search/${query}`);\r\n    }\r\n\r\n    logout(e) {\r\n      logout();\r\n      this.setState({ user: null, mySubreddits: null, loggedIn: false });\r\n    }\r\n\r\n  \trender() {\r\n\t\t  const { mySubreddits, loggedIn, user, sidebarIsOpen } = this.state;\r\n      const sanitizedUser = user ? { name: user.name, karma: user.comment_karma, img: user.icon_img } : null;\r\n  \r\n      return (\r\n\t\t  \t<Router history={ history }>\r\n\t\t    \t\r\n          <div className=\"App\">\r\n\t\t  \t\t  <NavBar loggedIn={ loggedIn } user={ sanitizedUser } handleSideBar={ this.handleSideBar } onSubmit={ this.handleSearch } logout={ this.logout } />\r\n    \r\n\t\t  \t\t  <SubRedditTab subreddits={ mySubreddits } isOpen={ sidebarIsOpen } handleSideBar={ this.handleSideBar } />\r\n    \r\n\t\t  \t\t  <Switch>\r\n\t\t  \t\t  \t<Route exact path={ `${uri}/frontpage` } render={ props => <Frontpage mySubreddits={ mySubreddits } loggedIn={ loggedIn } { ...props } /> } />\r\n\t\t  \t\t  \t<Route path={ `${uri}/r/:subreddit/:title` } component={Thread} />\r\n              <Route path={ `${uri}/r` } component={Sub} />\r\n              <Route path={ `${uri}/search/:query` } component={Search} />\r\n              <Route path={ `${uri}/loginsuccess` } component={LoginSuccess} />\r\n              <Route path={ `${uri}/` } component={About} />\r\n              <Route path={ `${uri}/about` } component={About} />\r\n\t\t  \t\t  </Switch>\t\r\n\t\t    \t</div>\r\n          \r\n\t\t    </Router>\r\n\t\t  );\r\n  \t}\r\n}\r\n\r\nexport default App;\r\n\r\nconst LoginSuccess = () => {\r\n  // works, because app remounts on login redirect\r\n  // and tryLogin() in compDidMount() fires again\r\n  setTimeout(() => history.push(uri), 100);\r\n  return (\r\n    <div>\r\n      <h2>Login Success!</h2>\r\n      <p>You will be redirected shortly.</p>\r\n    </div>\r\n  );\r\n}","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport registerServiceWorker from './registerServiceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\nregisterServiceWorker();\r\n"],"sourceRoot":""}