(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{23:function(e,t,n){e.exports=n(59)},28:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),i=n.n(o),c=(n(28),n(5)),l=n(6),s=n(8),u=n(7),d=n(2),m=n(9),h=n(63),p=n(62),f=n(61),E=n(15),g=Object(E.a)(),v=(n(29),n(4)),b=n.n(v),S=n(12),y={get:function(){return JSON.parse(localStorage.getItem("access_token"))},set:function(e){localStorage.setItem("access_token",JSON.stringify(e))},remove:function(){localStorage.removeItem("access_token")}};var O=function(e){var t=e.expires_in-Date.now()/1e3;return t>0&&(console.log("timeRemaining:",t+" sec"),!0)};function k(e){var t=e?e.value:"",n="top"===t?"&t=".concat(e.top):"";return"/".concat(t,".json?limit=100").concat(n)}function w(e){return N.apply(this,arguments)}function N(){return(N=Object(S.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/subreddits/search.json?q=".concat(t,"&limit=5"));case 2:return n=e.sent,e.next=5,x("/search.json?q=".concat(t));case 5:return a=e.sent,e.abrupt("return",{subreddits:n,posts:a});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e,t){return e=e?e.map((function(e){return e.data.display_name})):["askreddit","showerthoughts"],x("/r/".concat(e.join("+")).concat(k(t)))}function _(e,t){return x("/r/".concat(e).concat(k(t)))}function j(e,t,n){return x("/r/".concat(e,"/comments/").concat(t,"/.json?sort=").concat(n,"&limit=100"))}function C(e){return Promise.all([A("/api/v1/me",e),A("/subreddits/mine/subscriber",e)])}function R(e,t){return I("/api/vote?id=".concat(e,"&dir=").concat(t))}function x(e){return P.apply(this,arguments)}function P(){return(P=Object(S.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://www.reddit.com".concat(t));case 2:return n=e.sent,console.log(n.status),e.abrupt("return",n.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e,t){return D.apply(this,arguments)}function D(){return(D=Object(S.a)(b.a.mark((function e(t,n){var a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=n||y.get(),O(n)){e.next=4;break}return y.remove(),e.abrupt("return",Promise.reject("Token is expired."));case 4:return a={headers:{Authorization:"bearer ".concat(n.value)}},e.next=7,fetch("https://oauth.reddit.com".concat(t),a);case 7:return r=e.sent,console.log(r.status),e.abrupt("return",r.json());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return M.apply(this,arguments)}function M(){return(M=Object(S.a)(b.a.mark((function e(t){var n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=y.get(),O(n)){e.next=4;break}return y.remove(),e.abrupt("return",Promise.reject("Token is expired."));case 4:return a={method:"POST",headers:{Authorization:"bearer ".concat(n.value)}},e.next=7,fetch("https://oauth.reddit.com".concat(t),a);case 7:return r=e.sent,console.log(r.status),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,n,a){return L.apply(this,arguments)}function L(){return(L=Object(S.a)(b.a.mark((function e(t,n,a,r){var o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/api/morechildren.json?link_id=t3_".concat(t,"&children=").concat(n.join(", "),"&api_type=json"));case 2:return o=e.sent,e.abrupt("return",G(a,r.substring(3),o.json.data.things));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e,t,n){return new Promise((function(a,r){e[1].data.children.forEach((function(r,o){r.data.id===t&&"more"!==r.kind&&(r.data.replies.data.children.pop(),n.map((function(e){return r.data.replies.data.children.push(e)})),a(e)),r.data.replies&&function t(n,a,r){return new Promise((function(o,i){n.data.children.forEach((function(n,i){n.data.id===a&&"more"!==n.kind&&(n.data.replies.data.children.pop(),r.map((function(e){return n.data.replies.data.children.push(e)})),o(e)),n.data.replies&&t(n.data.replies,a,r).then((function(e){return o(e)})).catch((function(e){return console.err(e)}))}))}))}(r.data.replies,t,n).then((function(e){return e&&a(e)})).catch((function(e){return console.error(e)}))}))}))}var F=function(e){var t=window.location.hash.match(new RegExp(e+"=([^&]*)"));return t?t[1]:null};function V(){var e=y.get(),t=F("state"),n={value:F("access_token"),expires_in:Date.now()/1e3+Number(F("expires_in"))};return n&&t===Object({NODE_ENV:"production",PUBLIC_URL:"/ForRedditToGo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SECRET_STRING?(console.log("setting new token"),y.set(n),C(n)):e&&O(e)?C(e):(y.remove(),Promise.reject("not logged in"))}function H(){y.remove(),g.push("".concat("/ForRedditToGo","/"))}n(31);var U=n(60),W=(n(32),function(){return r.a.createElement("div",{className:"to-frontpage-container"},r.a.createElement(U.a,{to:"".concat("/ForRedditToGo","/frontpage")},r.a.createElement("button",{className:"to-frontpage-btn"},"To the frontpage")))}),K=function(){return r.a.createElement("div",{className:"About"},r.a.createElement(q,null),r.a.createElement(z,null))},q=function(){return r.a.createElement("header",{className:"about-banner"},r.a.createElement("div",{className:"banner-text"},r.a.createElement("h1",null,"For Reddit,To Go")),r.a.createElement("img",{alt:"",src:"".concat("/ForRedditToGo","/images/walker.png")}))},z=function(){return r.a.createElement("div",{className:"container"},r.a.createElement("section",{className:"about-section"},r.a.createElement("h1",null,"Listen to Reddit, while getting stuff done."),r.a.createElement("p",null,"Reddit To Go is a web application intended for portable devices that leverages the ",r.a.createElement("b",null,"Text to Speech")," features of modern browsers to read out reddit threads. For now please consider using the latest version of ",r.a.createElement("b",null,"Google Chrome")," or ",r.a.createElement("b",null,"Mozilla Firefox")," to ensure functionality and the best possible user experience."),r.a.createElement(W,null),r.a.createElement("p",null,"RedditToGo fits some subreddits more than others. Where it excels are textbased threads and comment trees. Accessing threads that share images, videos or links is possible, but for now you will have to follow the link to the original source to consume it."),r.a.createElement("p",null,"Features like messaging, mod features, etc are not included for now, because this is meant to be a complementary service one can use if needed."),r.a.createElement("p",null,"If you want to suggest or contribute a feature, feel free to contact me on my page or on github.")),r.a.createElement("section",{className:"about-section"},r.a.createElement("h1",null,"How to use / main features"),r.a.createElement("p",null,"When reading a thread a user may use the synthesizer buttons to control the speech synthesis. Pressing ",r.a.createElement("b",null,"PLAY")," will read the thread from beginning to end. You may skip or relisten to individual posts by using the ",r.a.createElement("b",null,"BACK")," / ",r.a.createElement("b",null,"SKIP")," buttons respectively. ",r.a.createElement("b",null,"STOP")," will halt and cancel all queued messages."),r.a.createElement("p",null,"You may also select a ",r.a.createElement("b",null,"READMODE"),". For now there is ",r.a.createElement("b",null,"STANDARD")," and ",r.a.createElement("b",null,"TOP CMNTS"),". ",r.a.createElement("b",null,"STANDARD")," will read the thread as is with all comments including some (or all, depending on the volume) high rated replies, while ",r.a.createElement("b",null,"TOP CMNTS")," only reads out comments without reading out any replies."),r.a.createElement("p",null,"Comments get initialized with the phrase: ",r.a.createElement("i",null,"USERNAME comments...")," while replies get initialized with ",r.a.createElement("i",null,"USERNAME replies..."))),r.a.createElement("section",{className:"about-section"},r.a.createElement("h1",null,"Contact"),r.a.createElement("p",null,"If you find any bugs or have suggestions please feel free to contact me on my page or on github. I built this project for myself initially, but figured some people might find it useful. I would be stoked to improve ",r.a.createElement("b",null,"For Reddit, To Go")," for others aswell."),r.a.createElement("div",{className:"socialmedia-icons"},r.a.createElement("a",{href:"https://raphaelmayer.github.io/go",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("i",{className:"fas fa-envelope"})),r.a.createElement("a",{href:"https://github.com/raphaelmayer/ForRedditToGo",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("i",{className:"fab fa-github"})))))},Y=(n(35),n(36),function(e){var t=Date.now(),n=Math.round((t-e)/1e3);if(n<10?n="Just now":n<60?n=Math.round(n)+" seconds ago":n<3600?n=Math.round(n/60)+" minutes ago":n<86400?n=Math.round(n/3600)+" hours ago":n<2592e3?n=Math.round(n/86400)+" days ago":n<31536e3?n=Math.round(n/2592e3)+" months ago":n>=31536e3&&(n=Math.round(n/31536e3)+" years ago"),n[0]<2){var a=n.indexOf("s");n=n.slice(0,a)+" ago"}return n}),J=function(e){var t=e.r,n=e.author,a=e.date,o=Y(1e3*a);return r.a.createElement("small",{className:"AuthorHeader"},r.a.createElement("span",{className:"subreddit"},r.a.createElement(U.a,{to:"".concat("/ForRedditToGo","/").concat(t)},t)),r.a.createElement("span",{className:"author"}," \u2022 Posted by u/",n),r.a.createElement("span",{className:"time"}," \u2022 ",o))};n(37);var $=function(e){return!e||e<1e3?e:(e=e.toString().split("")).map((function(t,n){return 0===n?t:(e.length-n)%3===0?" ".concat(t):t})).join("")};function Q(){console.log("no."),alert("no.")}var X,Z,ee=function(e){var t=e.data,n=e.handleVote,a=e.type;return r.a.createElement("div",{className:"ThreadStatsBox"},r.a.createElement("div",null,r.a.createElement("small",null,r.a.createElement("span",null,"".concat($(t.num_comments)||0," ").concat(a||"Comments"))),r.a.createElement("small",{className:"score-mobile"},r.a.createElement("span",null,r.a.createElement("i",{className:"fas fa-arrow-up",name:t.name,onClick:n||Q})," ".concat($(t.score)," Upvotes "),r.a.createElement("i",{className:"fas fa-arrow-down",name:t.name,onClick:n||Q})))),r.a.createElement(te,{url:t.url}))},te=function(e){var t=e.url;return t&&"https://www.reddit.com/"!==t.slice(0,23)?r.a.createElement("div",{className:"media-link"},r.a.createElement("a",{href:t,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("i",{className:"fas fa-link"}),r.a.createElement("span",null,t.split("/")[2]))):null},ne=function(e){var t=e.data,n=e.handleVote;return r.a.createElement("div",{className:"ThreadBox"},r.a.createElement("small",{className:"score"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("i",{className:"fas fa-arrow-up",name:t.name,onClick:n})),r.a.createElement("div",null,t.score),r.a.createElement("div",null,r.a.createElement("i",{className:"fas fa-arrow-down",name:t.name,onClick:n})))),r.a.createElement("div",{className:"content"},r.a.createElement(J,{r:t.subreddit_name_prefixed,author:t.author,date:t.created_utc}),r.a.createElement(U.a,{to:"".concat("/ForRedditToGo","/r/").concat(t.subreddit,"/").concat(t.id)},t&&r.a.createElement("h3",null,t.title),t.selftext&&r.a.createElement("p",{className:"selftext"},t.selftext)),r.a.createElement(ee,{data:{num_comments:t.num_comments,score:t.score,name:t.name,url:t.url},handleVote:n})))},ae=function(){return r.a.createElement("div",null,"There seems to be an error. Please try again and check your URL.")},re=(n(38),function(){return r.a.createElement("div",{className:"LoadingScreen"},r.a.createElement("div",null,r.a.createElement("div",{className:"spinner"})))}),oe=(n(39),function(e){var t=e.onChange,n=e.values,a=e.active;return r.a.createElement("form",{className:"SortBox",onChange:t},r.a.createElement("span",null,"Sort by"),r.a.createElement("select",{defaultValue:a.value||a},n&&n.map((function(e,t){return r.a.createElement("option",{value:e.toLowerCase(),key:t},e)}))),a.top&&r.a.createElement("select",{defaultValue:a.top,className:"top"===a.value?"SortBox-top SortBox-top-active":"SortBox-top"},ie.map((function(e,t){return r.a.createElement("option",{value:e.toLowerCase(),key:t},e)}))))}),ie=["Hour","Day","Week","Month","Year","All"],ce=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={listing:null,currentSub:null,loading:!0,sort:{value:"hot",top:"hour"}},e.handleSort=e.handleSort.bind(Object(d.a)(e)),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.pathname.split("/")[3];_(t).then((function(n){return e.setState({listing:n,currentSub:t,loading:!1})})).catch((function(n){return e.setState({listing:null,currentSub:t,loading:!1})}))}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props.location.pathname.split("/")[3],n=this.state,a=n.loading,r=n.currentSub,o=n.sort;a||r===t||(this.setState({loading:!0}),_(t,o).then((function(n){return e.setState({listing:n,currentSub:t,loading:!1})})).catch((function(n){return e.setState({listing:null,currentSub:t,loading:!1})})))}},{key:"handleSort",value:function(e){var t=this,n={value:e.target.form[0].value,top:e.target.form[1].value},a=this.props.location.pathname.split("/")[3];this.setState({loading:!0,sort:n}),_(a,n).then((function(e){return t.setState({listing:e,currentSub:a,loading:!1})})).catch((function(e){return t.setState({listing:null,currentSub:a,loading:!1})}))}},{key:"handleVote",value:function(e){var t=e.target.attributes.name.value,n="fas fa-arrow-up"===e.target.className?"1":"-1";e.target.className+=" orange",R(t,n).then((function(e){console.log(e)})).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.listing,a=t.loading,o=t.sort;if(a)return r.a.createElement(re,null);if(n&&n.data){var i=n.data.children;return r.a.createElement("div",{className:"Sub"},r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"SubTitle"},r.a.createElement("h2",null,"r/",i[0]&&i[0].data.subreddit)),r.a.createElement(oe,{onChange:this.handleSort,active:o,values:["Hot","New","Controversial","Top"]}),i.map((function(t,n){return r.a.createElement(ne,Object.assign({},t,{handleVote:e.handleVote,key:n}))}))))}return r.a.createElement(ae,null)}}]),t}(a.Component),le=n(16),se=n.n(le),ue=(n(51),n(52),function(e){var t=document.getElementById("log");t&&t.insertAdjacentHTML("beforeend","<small><b>".concat(e,"</b></small>"))}),de=0;function me(){de++;var e=X.getVoices();e.length&&(Z=e.find((function(e){return/en[-_]US/.test(e.lang)}))),Z||(de<10?setTimeout((function(){me()}),250):console.error("en-US voice not found."))}function he(e,t){var n=[],a=e[0].data.children[0].data.title,r=e[0].data.children[0].data.selftext,o=e[1].data.children;return a&&n.push(pe(a)),r&&n.push(pe(r)),o.forEach((function(e,a){n.push(" ".concat(e.data.author," comments: ? ")+pe(e.data.body)),"STANDARD"===t&&function e(t,n){if(t&&"more"!==t.kind){t.data.children.forEach((function(t,a){"more"!==t.kind&&(n.push(" ".concat(t.data.author," replies: ? ")+pe(t.data.body)),e(t.data.replies,n))}))}}(e.data.replies,n)})),n}function pe(e){return e?e.replace(/[^\w\s.:,_$@%;-=`\xb4'/!?]/gi,""):null}"speechSynthesis"in window&&(X=window.speechSynthesis,me());var fe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={logIsOpen:!1,listing:null,readmode:"STANDARD",script:null,position:0,isOn:!1},n.handleLog=n.handleLog.bind(Object(d.a)(n)),n.handleReadMode=n.handleReadMode.bind(Object(d.a)(n)),n.play=n.play.bind(Object(d.a)(n)),n.back=n.back.bind(Object(d.a)(n)),n.skip=n.skip.bind(Object(d.a)(n)),n.stop=n.stop.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.listing;e&&this.setState({listing:e})}},{key:"play",value:function(e){var t=this,n=this.state,a=n.listing,r=n.position,o=n.readmode;if(window.speechSynthesis.speaking)ue("TOGGLE PAUSE EVENT"),window.speechSynthesis.cancel(),this.setState({isOn:!1,position:r-1});else{ue("START EVENT");var i=he(a,o);ge(r,i,(function(e,n){t.setState({position:t.state.position+1})})),this.setState({isOn:!0,script:i,position:r})}}},{key:"back",value:function(e){var t=this;ue("BACK EVENT");var n=this.state,a=n.script,r=n.position,o=r<2?0:r-1;ge(o,a,(function(e,n){t.setState({position:t.state.position+1})})),window.speechSynthesis.speaking?this.setState({position:o-1,isOn:!0}):this.setState({position:o,isOn:!0})}},{key:"skip",value:function(e){var t=this;ue("SKIP EVENT");var n=this.state,a=n.script,r=n.position+1;ge(r,a,(function(e,n){t.setState({position:t.state.position+1})})),window.speechSynthesis.speaking?this.setState({position:r-1,isOn:!0}):this.setState({position:r,isOn:!0})}},{key:"stop",value:function(e){ue("STOP EVENT");var t=this.state.isOn;window.speechSynthesis.cancel(),t&&this.setState({isOn:!1,position:-1,script:null})}},{key:"handleLog",value:function(e){this.setState({logIsOpen:!this.state.logIsOpen})}},{key:"handleReadMode",value:function(e){this.setState({readmode:e.target.value})}},{key:"render",value:function(){var e=this.state,t=e.logIsOpen,n=e.isOn,a=e.readmode,o=e.position,i=e.script;return r.a.createElement("div",{className:"Synth"},r.a.createElement("i",{onClick:this.handleLog,className:"fas fa-bars"}),r.a.createElement("div",{id:"log",className:t?"":"hidden"},r.a.createElement("p",null,r.a.createElement("u",null,"DebugLog"))),r.a.createElement("div",{className:"synth-name"},"Synthesizer 2000"),r.a.createElement("div",{className:"readmode"},"Mode:",r.a.createElement("select",{onChange:this.handleReadMode,value:a},r.a.createElement("option",{value:"STANDARD"},"Standard"),r.a.createElement("option",{value:"TOP_COMMENTS"},"Top cmnts")),r.a.createElement("span",{className:"position"},"".concat(o," / ").concat(i?i.length:" - "))),r.a.createElement("div",{className:"synth-btn-container"},r.a.createElement(Ee,{icon:n?"fas fa-pause":"fas fa-play",onClick:this.play}),r.a.createElement(Ee,{icon:"fas fa-backward",onClick:this.back}),r.a.createElement(Ee,{icon:"fas fa-forward",onClick:this.skip}),r.a.createElement(Ee,{icon:"fas fa-stop",onClick:this.stop})))}}]),t}(a.Component),Ee=function(e){var t=e.icon,n=e.onClick;return r.a.createElement("div",{className:"synth-btn",onClick:n},r.a.createElement("i",{className:t,id:"playbtn"}))};function ge(e,t,n){window.speechSynthesis.cancel(),t.slice(e,t.length).forEach((function(e){e&&function(e,t){var n=new SpeechSynthesisUtterance(e);me(),n.lang="en-US",n.volume=1,n.rate=1,n.pitch=1,n.voice=Z,n.addEventListener("error",(function(e){return console.error(e)})),n.onstart=function(t){ue("array char count: ".concat(e.length," (32,767 max)")),ue("SPEECH started.")},n.onend=function(e){ue("SPEECH ended."),t&&t(null,e)},n.onpause=function(){ue("SPEECH paused.")},n.onresume=function(){ue("SPEECH resumed.")},n.onerror=function(e){ue("SPEECH ERROR!"),t&&t("ERROR reading out.",e)},X.speak(n)}(e,(function(e,t){e&&console.error(e),n(null,t)}))}))}var ve=function(e){var t=e.onClick,n=e.text,a=e.data,o=a&&a.children,i=a&&a.parent_id;return r.a.createElement("button",{onClick:function(e){return t(e,o,i)},className:"MoreButton"},"".concat(n))},be=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},Se=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={listing:null,loading:!0,toRead:null,sort:"Best"},e.handleSort=e.handleSort.bind(Object(d.a)(e)),e.handleMore=e.handleMore.bind(Object(d.a)(e)),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;j(this.props.location.pathname.split("/")[3],this.props.location.pathname.split("/")[4]).then((function(t){return e.setState({listing:t,loading:!1})})).catch((function(t){return e.setState({listing:null,loading:!1})}))}},{key:"handleSort",value:function(e){var t=this;this.setState({loading:!0,sort:e.target.value}),j(this.props.location.pathname.split("/")[3],this.props.location.pathname.split("/")[4],e.target.value).then((function(e){return t.setState({listing:e,loading:!1})})).catch((function(e){return t.setState({listing:null,loading:!1})}))}},{key:"handleVote",value:function(e){var t=e.target.attributes.name.value,n="fas fa-arrow-up"===e.target.className?"1":"-1";e.target.className+=" orange",R(t,n).then((function(e){console.log(e)})).catch((function(e){return console.error(e)}))}},{key:"handleMore",value:function(e,t,n){var a=this,r=this.state.listing;B(r[0].data.children[0].data.id,t,r,n).then((function(e){return a.setState({listing:e})})).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.listing,a=t.loading,o=t.sort;if(console.log("listing",n),console.log("should log"),a)return r.a.createElement(re,null);if(n){var i=n[0].data.children[0],c=n[1].data.children;return r.a.createElement("div",{className:"Thread"},r.a.createElement(fe,{listing:n}),r.a.createElement("div",{className:"container"},r.a.createElement(ye,Object.assign({},i,{handleVote:this.handleVote})),r.a.createElement("div",null,r.a.createElement(oe,{onChange:this.handleSort,active:o,values:["Best","Top","New","Controversial","Old"]}),c&&c.map((function(t,n){return r.a.createElement(Oe,Object.assign({key:n},t,{handleVote:e.handleVote,handleMore:e.handleMore}))})))))}return r.a.createElement(ae,null)}}]),t}(a.Component),ye=function(e){var t=e.data,n=e.handleVote;return r.a.createElement("article",{className:"ThreadHead"},r.a.createElement(J,{r:t.subreddit_name_prefixed,author:t.author,date:t.created_utc}),r.a.createElement("header",null,r.a.createElement("h2",null,t.title)),t.selftext_html&&r.a.createElement("div",null,se()(be(t.selftext_html))),r.a.createElement(ee,{data:{num_comments:t.num_comments,score:t.score,name:t.name,url:t.url},handleVote:n}))},Oe=function e(t){var n=t.data,a=t.handleVote,o=t.handleMore;n||console.error("");var i=n&&Y(1e3*n.created_utc);return r.a.createElement("div",{className:"CommentBox"},r.a.createElement("div",{className:"content"},r.a.createElement("small",{className:"author"},n.author," \u2022 ",i," "),r.a.createElement("div",null,se()(be(n.body_html))),r.a.createElement(ee,{data:{num_comments:n.replies&&n.replies.data.children.length,score:n.score,name:n.name},handleVote:a,type:"Replies"}),r.a.createElement("br",null),n.replies&&n.replies.data.children&&n.replies.data.children.map((function(t,n){return"more"===t.kind?r.a.createElement(ve,Object.assign({key:n},t,{onClick:o,text:"".concat(t.data.count," more replies")})):t.data&&r.a.createElement(e,Object.assign({},t,{key:n,handleVote:a,handleMore:o}))}))))},ke=(n(53),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={loading:!0,query:null,posts:null,subreddits:null},e.getMoreSubreddits=e.getMoreSubreddits.bind(Object(d.a)(e)),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(S.a)(b.a.mark((function e(){var t,n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.location.pathname.split("/")[3],e.next=3,w(t);case 3:n=e.sent,a=n.subreddits,r=n.posts,this.setState({posts:r,subreddits:a,loading:!1,query:t});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(S.a)(b.a.mark((function e(){var t,n,a,r,o,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,n=t.query,a=t.loading,r=this.props.location.pathname.split("/")[3],a||n===r){e.next=10;break}return this.setState({loading:!0}),e.next=6,w(r);case 6:o=e.sent,i=o.subreddits,c=o.posts,this.setState({subreddits:i,posts:c,loading:!1,query:r});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMoreSubreddits",value:function(){var e=Object(S.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.query,e.next=3,x("/subreddits/search.json?q=".concat(t,"&limit=25"));case 3:n=e.sent,this.setState({subreddits:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.posts,n=e.subreddits,a=e.loading,o=e.query;return a?r.a.createElement(re,null):t&&n||n||t?r.a.createElement("div",{className:"Search"},r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"SearchTitle"},r.a.createElement("h2",null,"Search results for ",r.a.createElement("u",null,o),":")),r.a.createElement("section",{className:"search-results"},r.a.createElement("h3",null,"Subreddits"),n.data.children[0]?n.data.children.map((function(e,t){return r.a.createElement(we,Object.assign({},e,{key:t}))})):r.a.createElement("small",null,"Wow, much empty o.O"),r.a.createElement(ve,{onClick:this.getMoreSubreddits,text:"Show more results"})),r.a.createElement("div",{style:{width:"100%",margin:"40px auto"}}),r.a.createElement("section",{className:"search-results"},r.a.createElement("h3",null,"Posts"),t.data.children[0]?t.data.children.map((function(e,t){return r.a.createElement(ne,Object.assign({},e,{key:t}))})):r.a.createElement("small",null,"Wow, much empty o.O")))):r.a.createElement(ae,null)}}]),t}(a.Component)),we=function(e){var t=e.data;return console.log(t),r.a.createElement(U.a,{to:"".concat("/ForRedditToGo","/r/").concat(t.display_name)},r.a.createElement("div",{className:"SubRedditBoxAlt"},r.a.createElement("div",{className:"head"},r.a.createElement("div",{className:"subreddit-box-img",style:{backgroundImage:"url(".concat(t.community_icon||t.icon_img,")")}}),r.a.createElement("div",{className:"title"},r.a.createElement("p",null,r.a.createElement("b",null,t.display_name_prefixed)),r.a.createElement("small",null,$(t.subscribers)," Subscribers"))),r.a.createElement("small",{className:"description"},t.public_description||t.title)))},Ne=(n(54),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={listing:null,loading:!0,sort:{value:"Hot",top:"Hour"}},n.handleSort=n.handleSort.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.mySubreddits;t.loggedIn;T(n).then((function(t){return e.setState({listing:t,loading:!1})})).catch((function(e){return console.error(e)}))}},{key:"handleSort",value:function(e){var t=this,n=this.props,a=n.mySubreddits,r=(n.loggedIn,{value:e.target.form[0].value,top:e.target.form[1].value});this.setState({loading:!0,sort:r}),T(a,r).then((function(e){return t.setState({listing:e,loading:!1})})).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){var e=this.state,t=e.listing,n=e.loading,a=e.sort;return n?r.a.createElement(re,null):t?r.a.createElement("div",{className:"Frontpage"},r.a.createElement("div",{className:"container"},r.a.createElement("header",{className:"SubTitle"},r.a.createElement("h2",null,"Frontpage")),r.a.createElement(oe,{onChange:this.handleSort,active:a,values:["Hot","New","Controversial","Top"]}),t.data.children.map((function(e,t){return r.a.createElement(ne,Object.assign({},e,{key:t}))})))):r.a.createElement(ae,null)}}]),t}(a.Component)),Te=(n(55),n(56),function(e){var t=e.loggedIn,n=e.user,a=e.logout;return r.a.createElement("div",{className:"login-user-field"},t&&n?r.a.createElement(_e,{user:n,logout:a}):r.a.createElement(je,null))}),_e=function(e){var t=e.user,n=e.logout;return r.a.createElement("div",{className:"UserBox"},r.a.createElement("div",{className:"name-karma-container"},r.a.createElement("div",{className:"name"},t.name),r.a.createElement("div",{className:"karma"},t.karma," Karma")),r.a.createElement("img",{src:t.img,alt:"user_image"}),r.a.createElement("button",{onClick:n,className:"logout-btn"},"Logout"))},je=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"/ForRedditToGo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}),t=e.REACT_APP_DURATION,n=e.REACT_APP_SCOPE,a=e.REACT_APP_SECRET_STRING,o=Object({NODE_ENV:"production",PUBLIC_URL:"/ForRedditToGo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_CLIENT_ID,i=Object({NODE_ENV:"production",PUBLIC_URL:"/ForRedditToGo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_URI;return r.a.createElement("a",{className:"login-btn",href:"https://www.reddit.com/api/v1/authorize\n\t\t\t?client_id=".concat(o,"\n\t\t\t&response_type=token\n\t\t\t&state=").concat(a,"\n\t\t\t&redirect_uri=").concat(i,"\n\t\t\t&duration=").concat(t,"\n\t\t\t&scope=").concat(n)},r.a.createElement("i",{className:"fas fa-user"}))},Ce=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={isHidden:!1},n.onScroll=function(){window.scrollY>n.prev?n.setState({isHidden:!0}):n.setState({isHidden:!1}),n.prev=window.scrollY},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.onScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.onScroll)}},{key:"render",value:function(){var e=this.props,t=e.loggedIn,n=e.user,a=e.handleSideBar,o=e.onSubmit,i=e.logout,c=this.state.isHidden;return r.a.createElement("nav",{className:c?"navbar hide":"navbar"},r.a.createElement("i",{onClick:a,className:"fas fa-bars"}),r.a.createElement(U.a,{to:"".concat("/ForRedditToGo","/"),className:"link"},r.a.createElement("div",{className:"logo"},"For Reddit To Go")),r.a.createElement("form",{onSubmit:o},r.a.createElement("input",{type:"text",placeholder:"search reddit"}),r.a.createElement("button",{type:"submit"},r.a.createElement("i",{className:"fas fa-search"}))),r.a.createElement(Te,{loggedIn:t,user:n,logout:i}))}}]),t}(a.Component),Re=(n(57),function(e){var t=e.subreddits,n=e.isOpen,a=e.handleSideBar;e.loggedIn;return r.a.createElement("div",{className:n?"SubRedditTab SubRedditTab-active":"SubRedditTab"},r.a.createElement("div",{className:"sub-reddit-tab-top"},r.a.createElement(U.a,{className:"logo",to:"".concat("/ForRedditToGo","/"),onClick:a},"For Reddit To Go"),r.a.createElement("i",{className:"fas fa-times",onClick:a})),r.a.createElement("div",{className:"about-link"},r.a.createElement(U.a,{to:"".concat("/ForRedditToGo","/about/")},"About")),t&&t.map((function(e,t){return r.a.createElement(xe,Object.assign({handleSideBar:a,key:t},e))})),!t&&r.a.createElement("div",{className:"not-logged-in"},"Log in to see a list of your subscribed subreddits."))}),xe=function(e){var t=e.data,n=e.handleSideBar;return r.a.createElement(U.a,{to:"".concat("/ForRedditToGo","/r/").concat(t.display_name),onClick:n,className:"subreddit-box"},r.a.createElement("div",{className:"subreddit-box-img",style:{backgroundImage:"url(".concat(t.community_icon||t.icon_img,")")}}),r.a.createElement("h3",null,t.display_name_prefixed))},Pe="/ForRedditToGo",Ae=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={user:null,mySubreddits:null,loggedIn:!1,sidebarIsOpen:!1},e.handleSideBar=e.handleSideBar.bind(Object(d.a)(e)),e.handleSearch=e.handleSearch.bind(Object(d.a)(e)),e.logout=e.logout.bind(Object(d.a)(e)),e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;V().then((function(t){e.setState({user:t[0],mySubreddits:t[1].data.children,loggedIn:!0})})).catch((function(e){console.error(e)}))}},{key:"handleSideBar",value:function(e){this.setState({sidebarIsOpen:!this.state.sidebarIsOpen})}},{key:"handleSearch",value:function(e){e.preventDefault();var t=e.target[0].value;g.push("".concat(Pe,"/search/").concat(t))}},{key:"logout",value:function(e){H(),this.setState({user:null,mySubreddits:null,loggedIn:!1})}},{key:"render",value:function(){var e=this.state,t=e.mySubreddits,n=e.loggedIn,a=e.user,o=e.sidebarIsOpen,i=a?{name:a.name,karma:a.comment_karma,img:a.icon_img}:null;return r.a.createElement(h.a,{history:g},r.a.createElement("div",{className:"App"},r.a.createElement(Ce,{loggedIn:n,user:i,handleSideBar:this.handleSideBar,onSubmit:this.handleSearch,logout:this.logout}),r.a.createElement(Re,{subreddits:t,isOpen:o,handleSideBar:this.handleSideBar}),r.a.createElement(p.a,null,r.a.createElement(f.a,{exact:!0,path:"".concat(Pe,"/frontpage"),render:function(e){return r.a.createElement(Ne,Object.assign({mySubreddits:t,loggedIn:n},e))}}),r.a.createElement(f.a,{path:"".concat(Pe,"/r/:subreddit/:title"),component:Se}),r.a.createElement(f.a,{path:"".concat(Pe,"/r"),component:ce}),r.a.createElement(f.a,{path:"".concat(Pe,"/search/:query"),component:ke}),r.a.createElement(f.a,{path:"".concat(Pe,"/loginsuccess"),component:De}),r.a.createElement(f.a,{path:"".concat(Pe,"/"),component:K}),r.a.createElement(f.a,{path:"".concat(Pe,"/about"),component:K}))))}}]),t}(a.Component),De=function(){return setTimeout((function(){return g.push(Pe)}),100),r.a.createElement("div",null,r.a.createElement("h2",null,"Login Success!"),r.a.createElement("p",null,"You will be redirected shortly."))},Ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Me(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(Ae,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/ForRedditToGo",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/ForRedditToGo","/service-worker.js");Ie?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Me(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Me(e)}))}}()}},[[23,1,2]]]);
//# sourceMappingURL=main.571bae54.chunk.js.map